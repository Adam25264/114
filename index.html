<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ðŸ”‘ Google Site Verification -->
    <meta name="google-site-verification" content="kCYBYHKA4RtNqyk4O50YZoFFx-D3B-b_h0QU4HAyGM0" />
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="SmartTendance - AI-powered facial recognition attendance system for universities and schools. Streamline attendance tracking with QR codes and real-time monitoring.">
    <meta name="keywords" content="attendance system, facial recognition, QR code attendance, university attendance, smart attendance, lecturer portal, student management">
    <meta name="author" content="SmartTendance">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://smarttendance-lecturer-v1.web.app/">
    <meta property="og:title" content="SmartTendance - AI Attendance System for Universities">
    <meta property="og:description" content="Advanced attendance management system with QR codes and facial recognition technology.">
    <meta property="og:image" content="https://smarttendance-lecturer-v1.web.app/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://smarttendance-lecturer-v1.web.app/">
    <meta property="twitter:title" content="SmartTendance - AI Attendance System for Universities">
    <meta property="twitter:description" content="Advanced attendance management system with QR codes and facial recognition technology.">
    <meta property="twitter:image" content="https://smarttendance-lecturer-v1.web.app/og-image.jpg">
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "SmartTendance",
      "url": "https://smarttendance-lecturer-v1.web.app",
      "description": "AI-powered facial recognition attendance system. Login or signup to manage student attendance with advanced technology.",
      "applicationCategory": "EducationApplication",
      "operatingSystem": "Web, iOS, Android",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "SmartTendance",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+2349128573586",
          "email": "smartTendance.tech@gmail.com"
        }
      },
      "potentialAction": {
        "@type": "LoginAction",
        "target": "https://smarttendance-lecturer-v1.web.app#login"
      }
    }
    </script>
    
    <title>SmartTendance - AI-Powered Attendance System | QR Code & Facial Recognition</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#22aa44">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SmartTendance">
    <link rel="apple-touch-icon" href="/icons/ios/180.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ==================== LANDING PAGE STYLES ==================== */
        .landing-container {
            display: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .landing-container.active {
            display: block;
        }
        
        /* Landing Page Header */
        .landing-header {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: black;
        }
        
        .logo-text h1 {
            font-size: 24px;
            color: #44ff44;
            margin: 0;
        }
        
        .logo-text p {
            font-size: 12px;
            opacity: 0.8;
            margin: 0;
        }
        
        .landing-nav {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .landing-nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .landing-nav a:hover {
            color: #44ff44;
        }
        
        .landing-cta {
            background: #44ff44;
            color: black;
            padding: 10px 25px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .landing-cta:hover {
            transform: translateY(-2px);
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 100px 40px 40px;
            color: white;
        }
        
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        .hero-text h2 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #44ff44, #22cc22);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .hero-text p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .hero-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            background: rgba(68, 255, 68, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #44ff44;
        }
        
        .hero-buttons {
            display: flex;
            gap: 20px;
        }
        
        .btn-primary {
            background: #44ff44;
            color: black;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(68, 255, 68, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #44ff44;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background: #44ff44;
            color: black;
        }
        
        .hero-image {
            text-align: center;
        }
        
        .hero-image img {
            max-width: 100%;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }
        
        /* Features Section */
        .features-section {
            padding: 80px 40px;
            background: #0a0a0a;
            color: white;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            color: #44ff44;
            margin-bottom: 15px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .feature-card {
            background: #1a1a1a;
            padding: 40px 30px;
            border-radius: 15px;
            border: 1px solid #333;
            transition: all 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            border-color: #44ff44;
            box-shadow: 0 15px 30px rgba(68, 255, 68, 0.2);
        }
        
        .feature-card i {
            font-size: 40px;
            color: #44ff44;
            margin-bottom: 20px;
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #44ff44;
        }
        
        /* How It Works Section */
        .how-it-works {
            padding: 80px 40px;
            background: #0a0a0a;
            color: white;
        }
        
        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .step {
            text-align: center;
            padding: 30px;
            background: #1a1a1a;
            border-radius: 15px;
            border: 1px solid #333;
        }
        
        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: black;
            margin: 0 auto 20px;
        }
        
        /* CTA Section */
        .cta-section {
            padding: 80px 40px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: white;
            text-align: center;
        }
        
        .cta-section h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #44ff44;
        }
        
        .contact-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(68, 255, 68, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
        }
        
        .contact-item i {
            color: #44ff44;
            font-size: 24px;
        }
        
        /* Footer */
        .landing-footer {
            background: #0a0a0a;
            color: white;
            padding: 40px;
            text-align: center;
            border-top: 1px solid #333;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .landing-nav {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #1a1a1a;
                padding: 20px;
                flex-direction: column;
                text-align: center;
            }
            
            .landing-nav.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .hero-text h2 {
                font-size: 2.5rem;
            }
            
            .hero-features {
                grid-template-columns: 1fr;
            }
        }
        
        /* ==================== MAIN APP STYLES ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #22aa44;
            --primary-dark: #1a8833;
            --primary-light: #2dcc55;
            --secondary: #1a8833;
            --danger: #ff5555;
            --warning: #ffaa00;
            --dark: #1a1a1a;
            --light: #f5f5f5;
            --gray: #cccccc;
            --text-dark: #333333;
            --text-light: #ffffff;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #ffffff;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        body.light-mode {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            color: #333333;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* ==================== AUTHENTICATION STYLES ==================== */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 40px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        }
        
        body.light-mode .auth-container {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
        }
        
        .auth-box {
            background: #2a2a2a;
            width: 100%;
            max-width: 900px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            overflow: hidden;
            border: 1px solid #333;
            display: flex;
            min-height: 650px;
        }
        
        body.light-mode .auth-box {
            background: #ffffff;
            border: 1px solid #ddd;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }
        
        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            padding: 50px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-right: 1px solid #333;
        }
        
        body.light-mode .auth-left {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
            border-right: 1px solid #ddd;
        }
        
        .auth-right {
            flex: 1.2;
            padding: 40px;
            display: flex;
            flex-direction: column;
        }
        
        .auth-header {
            color: #44ff44;
            padding-bottom: 30px;
            text-align: center;
            border-bottom: 1px solid #333;
            margin-bottom: 30px;
        }
        
        body.light-mode .auth-header {
            color: #007bff;
            border-bottom: 1px solid #ddd;
        }
        
        .auth-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .auth-header p {
            opacity: 0.9;
            font-size: 16px;
            color: #cccccc;
        }
        
        body.light-mode .auth-header p {
            color: #666666;
        }
        
        .auth-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .auth-left-content h2 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #44ff44;
        }
        
        body.light-mode .auth-left-content h2 {
            color: #007bff;
        }
        
        .auth-left-content p {
            font-size: 16px;
            line-height: 1.6;
            color: #cccccc;
            margin-bottom: 30px;
        }
        
        body.light-mode .auth-left-content p {
            color: #666666;
        }
        
        .features-list {
            text-align: left;
            margin-top: 30px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 15px;
        }
        
        .feature-item i {
            color: #44ff44;
            margin-right: 10px;
            font-size: 18px;
        }
        
        body.light-mode .feature-item i {
            color: #007bff;
        }
        
        /* Lecturer Badge */
        .lecturer-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            background: #1a1a1a;
            border-radius: 12px;
            padding: 15px;
            gap: 12px;
            border: 1px solid #44ff44;
        }
        
        body.light-mode .lecturer-badge {
            background: #e0e0e0;
            border: 1px solid #007bff;
        }
        
        .lecturer-badge i {
            color: #44ff44;
            font-size: 22px;
        }
        
        body.light-mode .lecturer-badge i {
            color: #007bff;
        }
        
        .lecturer-badge span {
            font-weight: 600;
            font-size: 18px;
        }
        
        /* Form Toggle */
        .form-toggle {
            display: flex;
            margin-bottom: 30px;
            background: #1a1a1a;
            border-radius: 12px;
            padding: 6px;
        }
        
        body.light-mode .form-toggle {
            background: #e0e0e0;
        }
        
        .toggle-btn {
            flex: 1;
            padding: 14px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #cccccc;
            font-size: 16px;
        }
        
        body.light-mode .toggle-btn {
            color: #666666;
        }
        
        .toggle-btn.active {
            background: #44ff44;
            color: #000000;
        }
        
        body.light-mode .toggle-btn.active {
            background: #007bff;
            color: #ffffff;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 15px;
            color: #cccccc;
        }
        
        body.light-mode .form-group label {
            color: #666666;
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-with-icon input, .input-with-icon select {
            width: 100%;
            padding: 18px;
            border: 2px solid #333;
            border-radius: 12px;
            font-size: 16px;
            background: #1a1a1a;
            color: #ffffff;
            transition: all 0.3s ease;
        }
        
        body.light-mode .input-with-icon input, 
        body.light-mode .input-with-icon select {
            border: 2px solid #ddd;
            background: #f9f9f9;
            color: #333333;
        }
        
        .input-with-icon input:focus, .input-with-icon select:focus {
            border-color: #44ff44;
            outline: none;
            box-shadow: 0 0 0 3px rgba(68, 255, 68, 0.2);
        }
        
        body.light-mode .input-with-icon input:focus, 
        body.light-mode .input-with-icon select:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
        }
        
        .input-with-icon.error input {
            border-color: #ff4444;
        }
        
        .error-message {
            color: #ff4444;
            font-size: 13px;
            margin-top: 8px;
            display: none;
        }
        
        /* Two-column layout for signup form */
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        /* Password Strength Indicator */
        .password-strength-container {
            margin-top: 12px;
        }
        
        .strength-meter {
            height: 6px;
            background: #333;
            border-radius: 3px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        body.light-mode .strength-meter {
            background: #ddd;
        }
        
        .strength-fill {
            height: 100%;
            width: 0%;
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        .strength-fill.weak {
            background: #ff4444;
            width: 25%;
        }
        
        .strength-fill.fair {
            background: #ffaa00;
            width: 50%;
        }
        
        .strength-fill.good {
            background: #44aaff;
            width: 75%;
        }
        
        .strength-fill.strong {
            background: #44ff44;
            width: 100%;
        }
        
        .strength-text {
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .strength-label {
            color: #888;
        }
        
        body.light-mode .strength-label {
            color: #666;
        }
        
        .strength-value {
            font-weight: 600;
        }
        
        .strength-requirements {
            font-size: 13px;
            color: #888;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        body.light-mode .strength-requirements {
            color: #666;
        }
        
        .requirement {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
        }
        
        .requirement i {
            margin-right: 8px;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .requirement.valid {
            color: #44ff44;
        }
        
        .requirement.valid i {
            color: #44ff44;
        }
        
        .requirement.invalid {
            color: #888;
        }
        
        .requirement.invalid i {
            color: #888;
        }
        
        .btn {
            display: inline-block;
            padding: 18px;
            background: #44ff44;
            color: #000000;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        body.light-mode .btn {
            background: #007bff;
            color: #ffffff;
        }
        
        .btn:hover {
            background: #33dd33;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(68, 255, 68, 0.3);
        }
        
        body.light-mode .btn:hover {
            background: #0056b3;
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            background: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .terms {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            font-size: 15px;
            color: #cccccc;
        }
        
        body.light-mode .terms {
            color: #666666;
        }
        
        .terms input {
            margin-right: 12px;
            margin-top: 4px;
        }
        
        .terms a {
            color: #44ff44;
            text-decoration: none;
            font-weight: 600;
        }
        
        body.light-mode .terms a {
            color: #007bff;
        }
        
        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }
        
        .forgot-password a {
            color: #44ff44;
            text-decoration: none;
            font-size: 15px;
        }
        
        body.light-mode .forgot-password a {
            color: #007bff;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
            color: white;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid #333;
            border-top: 6px solid #44ff44;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Result Modal */
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 30px;
        }
        
        body.light-mode .result-modal {
            background: rgba(0,0,0,0.7);
        }
        
        .result-content {
            background: #2a2a2a;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #44ff44;
            max-width: 500px;
            width: 100%;
        }
        
        body.light-mode .result-content {
            background: #ffffff;
            border: 3px solid #007bff;
        }
        
        .result-success {
            border-color: #44ff44;
        }
        
        body.light-mode .result-success {
            border-color: #007bff;
        }
        
        .result-error {
            border-color: #ff4444;
        }
        
        .result-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .auth-box {
                flex-direction: column;
                max-width: 500px;
            }
            
            .auth-left {
                border-right: none;
                border-bottom: 1px solid #333;
                padding: 40px 30px;
            }
            
            body.light-mode .auth-left {
                border-bottom: 1px solid #ddd;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }

        /* ==================== DASHBOARD STYLES ==================== */
        .app-container {
            display: none;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .app-container.active {
            display: block;
        }
        
        /* HEADER STYLES */
        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid #333333;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        .light-mode .header {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
            border: 1px solid #cccccc;
            color: #333333;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            color: #44ff44;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 0 2px 10px rgba(68, 255, 68, 0.3);
        }
        
        .light-mode .header h1 {
            color: #0066cc;
            text-shadow: 0 2px 10px rgba(0, 102, 204, 0.2);
        }
        
        .nav-buttons {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            color: #000;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(68, 255, 68, 0.3);
        }
        
        .light-mode .nav-btn {
            background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 102, 204, 0.3);
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(68, 255, 68, 0.5);
        }
        
        .light-mode .nav-btn:hover {
            box-shadow: 0 6px 20px rgba(0, 102, 204, 0.5);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #ff5555 0%, #cc2222 100%);
            color: white;
        }
        
        .light-mode .nav-btn.active {
            background: linear-gradient(135deg, #cc0000 0%, #990000 100%);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid #333;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .light-mode .stat-card {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
            border: 1px solid #cccccc;
            color: #333333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .light-mode .stat-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #44ff44;
            margin: 10px 0;
        }
        
        .light-mode .stat-number {
            color: #0066cc;
        }
        
        .lectures-container {
            background: #1a1a1a;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid #333333;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .light-mode .lectures-container {
            background: #f0f0f0;
            border: 1px solid #cccccc;
            color: #333333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .table-header {
            background: #2a2a2a;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #44ff44;
        }
        
        .light-mode .table-header {
            background: #e0e0e0;
            border-bottom: 2px solid #0066cc;
        }
        
        .lectures-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .lectures-table th {
            background: #2a2a2a;
            color: #44ff44;
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #44ff44;
        }
        
        .light-mode .lectures-table th {
            background: #e0e0e0;
            color: #0066cc;
            border-bottom: 2px solid #0066cc;
        }
        
        .lectures-table td {
            padding: 15px;
            border-bottom: 1px solid #333;
            color: #ffffff;
        }
        
        .light-mode .lectures-table td {
            border-bottom: 1px solid #cccccc;
            color: #333333;
        }
        
        .lectures-table tr:hover {
            background: #2a2a2a;
        }
        
        .light-mode .lectures-table tr:hover {
            background: #e8e8e8;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-scheduled { background: #331111; color: #ff5555; border: 1px solid #ff5555; }
        .status-active { background: #333311; color: #ffff44; border: 1px solid #ffff44; }
        .status-completed { background: #113311; color: #44ff44; border: 1px solid #44ff44; }
        
        .light-mode .status-scheduled { background: #ffe6e6; color: #cc0000; border: 1px solid #cc0000; }
        .light-mode .status-active { background: #fff9e6; color: #cc9900; border: 1px solid #cc9900; }
        .light-mode .status-completed { background: #e6ffe6; color: #006600; border: 1px solid #006600; }
        
        .dashboard-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            margin: 2px;
            transition: all 0.3s ease;
        }
        
        .dashboard-btn-primary { background: #44ff44; color: #000; }
        .dashboard-btn-warning { background: #ffff44; color: #000; }
        .dashboard-btn-danger { background: #ff5555; color: #fff; }
        .dashboard-btn-info { background: #2196f3; color: #fff; }
        
        .light-mode .dashboard-btn-primary { background: #0066cc; color: #fff; }
        .light-mode .dashboard-btn-warning { background: #ff9900; color: #fff; }
        .light-mode .dashboard-btn-danger { background: #cc0000; color: #fff; }
        .light-mode .dashboard-btn-info { background: #006699; color: #fff; }
        
        .dashboard-btn:hover {
            transform: scale(1.05);
        }
        
        /* QR MODAL STYLES */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .light-mode .modal {
            background: rgba(0,0,0,0.7);
        }
        
        .modal-content {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #44ff44;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .light-mode .modal-content {
            background: #f0f0f0;
            border: 2px solid #0066cc;
            color: #333333;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .qr-code-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
            margin: 20px 0;
            border: 3px solid #44ff44;
        }
        
        .light-mode .qr-code-container {
            border: 3px solid #0066cc;
        }
        
        .qr-code-image {
            width: 200px;
            height: 200px;
            display: block;
        }
        
        .qr-info {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: left;
        }
        
        .light-mode .qr-info {
            background: #e0e0e0;
        }
        
        .qr-info p {
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .qr-info strong {
            color: #44ff44;
        }
        
        .light-mode .qr-info strong {
            color: #0066cc;
        }
        
        .qr-timer {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: #1a1a1a;
        }
        
        .light-mode .qr-timer {
            background: #f0f0f0;
        }
        
        .timer-warning {
            color: #ffff44;
            animation: blink 1s infinite;
        }
        
        .timer-danger {
            color: #ff5555;
            animation: blink 0.5s infinite;
        }
        
        .auto-scan-status {
            background: #113311;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #44ff44;
        }
        
        .light-mode .auto-scan-status {
            background: #e6ffe6;
            border: 1px solid #006600;
        }
        
        .scan-progress {
            width: 100%;
            height: 20px;
            background: #333;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .light-mode .scan-progress {
            background: #ddd;
        }
        
        .scan-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #44ff44, #22cc22);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Live Scanning Indicator */
        .live-scanning-indicator {
            display: inline-flex;
            align-items: center;
            background: #113311;
            color: #44ff44;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
            border: 1px solid #44ff44;
            animation: pulse-green 1.5s infinite;
        }
        
        .live-scanning-indicator i {
            margin-right: 5px;
        }
        
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(68, 255, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(68, 255, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(68, 255, 68, 0); }
        }
        
        /* FORM STYLES */
        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
        }
        
        .light-mode .form-group label {
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            background: #1a1a1a;
            color: white;
            border: 1px solid #444;
        }
        
        .light-mode .form-group input, .light-mode .form-group select {
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ccc;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-buttons button {
            flex: 1;
        }
        
        .scan-instruction {
            background: #113311;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            border: 2px solid #44ff44;
        }
        
        .light-mode .scan-instruction {
            background: #e6ffe6;
            border: 2px solid #006600;
        }
        
        .scan-instruction h3 {
            color: #44ff44;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }
        
        .light-mode .scan-instruction h3 {
            color: #006600;
        }
        
        /* ATTENDANCE MANAGEMENT STYLES */
        .filters {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .light-mode .filters {
            background: #e0e0e0;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .filter-group label {
            color: #44ff44;
            font-size: 14px;
        }
        
        .light-mode .filter-group label {
            color: #0066cc;
        }
        
        .filter-group select, .filter-group input {
            background: #1a1a1a;
            border: 1px solid #444;
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
        }
        
        .light-mode .filter-group select, .light-mode .filter-group input {
            background: #f5f5f5;
            border: 1px solid #cccccc;
            color: #333333;
        }
        
        .attendance-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .summary-card {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #444;
        }
        
        .light-mode .summary-card {
            background: #e0e0e0;
            border: 1px solid #cccccc;
        }
        
        /* SCHEDULE MANAGEMENT STYLES */
        .calendar {
            background: #2a2a2a;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .light-mode .calendar {
            background: #e0e0e0;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            background: #1a1a1a;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .light-mode .calendar-day {
            background: #f5f5f5;
            color: #333333;
        }
        
        .calendar-day:hover {
            background: #2a2a2a;
            transform: scale(1.05);
        }
        
        .light-mode .calendar-day:hover {
            background: #e8e8e8;
        }
        
        .calendar-day.has-lecture {
            background: #113311;
            border: 1px solid #44ff44;
        }
        
        .light-mode .calendar-day.has-lecture {
            background: #e6ffe6;
            border: 1px solid #006600;
        }
        
        .calendar-day.today {
            background: #44ff44;
            color: #000;
            font-weight: bold;
        }
        
        .light-mode .calendar-day.today {
            background: #0066cc;
            color: #fff;
        }
        
        /* STUDENT SCANNER STYLES */
        .scanner-container {
            text-align: center;
            margin: 40px 0;
        }
        
        .scanner-placeholder {
            width: 300px;
            height: 300px;
            background: #2a2a2a;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            border: 2px solid #44ff44;
            margin: 20px 0;
        }
        
        .light-mode .scanner-placeholder {
            background: #e0e0e0;
            border: 2px solid #0066cc;
        }
        
        .scanner-instructions-full {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 600px;
            text-align: left;
        }
        
        .light-mode .scanner-instructions-full {
            background: #e0e0e0;
        }
        
        .scanner-instructions-full ol {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .scanner-instructions-full li {
            margin-bottom: 10px;
        }
        
        /* SETTINGS STYLES */
        .settings-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .settings-card {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #333333;
        }
        
        .light-mode .settings-card {
            background: #f0f0f0;
            border: 1px solid #cccccc;
        }
        
        .settings-card h3 {
            color: #44ff44;
            margin-bottom: 15px;
        }
        
        .light-mode .settings-card h3 {
            color: #0066cc;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #333;
        }
        
        .light-mode .setting-item {
            border-bottom: 1px solid #cccccc;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 34px;
        }
        
        .light-mode .slider {
            background-color: #ccc;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #44ff44;
        }
        
        .light-mode input:checked + .slider {
            background-color: #0066cc;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Sync Status Banner */
        .sync-status {
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            color: #000;
            padding: 12px;
            border-radius: 10px;
            margin: 12px 0;
            text-align: center;
            font-weight: bold;
        }
        
        /* Notification Styles */
        #scanNotification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #44ff44;
            color: #000;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 10000;
            box-shadow: 0 5px 15px rgba(68, 255, 68, 0.5);
            animation: slideIn 0.3s ease;
        }
        
        /* Beautiful Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 25px;
            border-radius: 12px;
            font-weight: bold;
            z-index: 10000;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s ease, fadeOut 0.5s ease 3s forwards;
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }
        
        .notification-success {
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            color: #000;
            border-left: 5px solid #1a8833;
        }
        
        .notification-info {
            background: linear-gradient(135deg, #4488ff 0%, #2266cc 100%);
            color: #fff;
            border-left: 5px solid #1a4488;
        }
        
        .notification-warning {
            background: linear-gradient(135deg, #ffff44 0%, #cccc22 100%);
            color: #000;
            border-left: 5px solid #888833;
        }
        
        .notification-danger {
            background: linear-gradient(135deg, #ff5555 0%, #cc2222 100%);
            color: #fff;
            border-left: 5px solid #881a1a;
        }
        
        .notification-icon {
            font-size: 24px;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .notification-message {
            font-size: 14px;
            opacity: 0.9;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Pulse animation for real-time updates */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .scan-update {
            animation: pulse 0.5s ease;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        /* Lecturer Info Panel - Updated for top-right corner */
        .lecturer-info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #44ff44;
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 300px;
            z-index: 10;
        }
        
        .light-mode .lecturer-info-panel {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
            border: 1px solid #0066cc;
        }
        
        .lecturer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #44ff44;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #000;
        }
        
        .light-mode .lecturer-avatar {
            background: #0066cc;
            color: #fff;
        }
        
        .lecturer-details {
            flex: 1;
        }
        
        .lecturer-details h3 {
            color: #44ff44;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .light-mode .lecturer-details h3 {
            color: #0066cc;
        }
        
        .lecturer-details p {
            margin: 2px 0;
            color: #ccc;
            font-size: 12px;
        }
        
        .light-mode .lecturer-details p {
            color: #666;
        }
        
        /* Logout button in settings */
        .logout-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }
        
        .light-mode .logout-section {
            border-top: 1px solid #ccc;
        }
        
        @media (max-width: 600px) {
            .nav-buttons {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .notification {
                max-width: 300px;
                right: 10px;
                left: 10px;
            }
            
            .lecturer-info-panel {
                position: relative;
                top: auto;
                right: auto;
                margin: 15px auto;
                max-width: 100%;
            }
        }

        /* Beautiful App Icon */
        .app-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 8px 20px rgba(68, 255, 68, 0.3);
        }
        
        .app-icon i {
            font-size: 36px;
            color: #000;
        }
        
        .light-mode .app-icon {
            background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
            box-shadow: 0 8px 20px rgba(0, 102, 204, 0.3);
        }
        
        .light-mode .app-icon i {
            color: #fff;
        }

        /* ==================== PWA STYLES ==================== */
        
        /* PWA Installation Banner */
        .pwa-install-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            padding: 15px 20px;
            display: none;
            align-items: center;
            justify-content: space-between;
            z-index: 10000;
            border-top: 2px solid #44ff44;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }
        
        .light-mode .pwa-install-banner {
            background: linear-gradient(135deg, #e0e0e0 0%, #f0f0f0 100%);
            border-top: 2px solid #0066cc;
        }
        
        .pwa-install-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pwa-install-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #44ff44 0%, #22cc22 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .light-mode .pwa-install-icon {
            background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
        }
        
        .pwa-install-text h4 {
            color: #44ff44;
            margin-bottom: 5px;
        }
        
        .light-mode .pwa-install-text h4 {
            color: #0066cc;
        }
        
        .pwa-install-text p {
            font-size: 14px;
            color: #ccc;
        }
        
        .light-mode .pwa-install-text p {
            color: #666;
        }
        
        .pwa-install-buttons {
            display: flex;
            gap: 10px;
        }
        
        /* Offline Indicator */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ff5555;
            color: white;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            z-index: 10001;
            display: none;
        }
        
        .offline-indicator.online {
            background: #44ff44;
            color: #000;
        }
        
        /* App Update Notification */
        .app-update-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #4488ff 0%, #2266cc 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 10002;
            display: none;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .app-update-buttons {
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
    <!-- ==================== LANDING PAGE ==================== -->
    <div id="landingPage" class="landing-container">
        <!-- Header -->
        <header class="landing-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <div class="logo-text">
                    <h1>SmartTendance</h1>
                    <p>AI-Powered Attendance System</p>
                </div>
            </div>
            
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="landing-nav">
                <a href="#features">Features</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#contact">Contact</a>
                <div class="landing-cta" onclick="goToApp()">
                    <i class="fas fa-sign-in-alt"></i> Access App
                </div>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="hero-text">
                    <h2>Revolutionizing University Attendance Management</h2>
                    <p>SmartTendance combines QR code scanning with facial recognition technology to provide a seamless, accurate, and efficient attendance tracking system for educational institutions.</p>
                    
                    <div class="hero-features">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-qrcode"></i>
                            </div>
                            <div>
                                <h4>QR Code Scanning</h4>
                                <p>Quick and contactless attendance marking</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div>
                                <h4>AI Facial Recognition</h4>
                                <p>Advanced biometric verification</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div>
                                <h4>Real-time Analytics</h4>
                                <p>Instant attendance reports and insights</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div>
                                <h4>Mobile App</h4>
                                <p>Student app for easy attendance marking</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hero-buttons">
                        <button class="btn-primary" onclick="goToApp()">
                            <i class="fas fa-rocket"></i> Get Started Free
                        </button>
                        <button class="btn-secondary" onclick="scrollToFeatures()">
                            <i class="fas fa-play-circle"></i> Watch Demo
                        </button>
                    </div>
                </div>
                
                <div class="hero-image">
                    <div style="background: linear-gradient(135deg, #44ff44, #22cc22); padding: 30px; border-radius: 20px; display: inline-block;">
                        <i class="fas fa-chalkboard-teacher" style="font-size: 200px; color: black;"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features-section">
            <div class="section-title">
                <h2>Powerful Features</h2>
                <p>Everything you need for modern attendance management</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-bolt"></i>
                    <h3>Instant Scanning</h3>
                    <p>QR codes refresh every 10 seconds for enhanced security and real-time attendance tracking.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-user-check"></i>
                    <h3>Facial Verification</h3>
                    <p>AI-powered facial recognition ensures accurate student identification and prevents proxy attendance.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-cloud"></i>
                    <h3>Cloud Sync</h3>
                    <p>All data securely stored in the cloud with real-time synchronization across devices.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-chart-bar"></i>
                    <h3>Analytics Dashboard</h3>
                    <p>Comprehensive reports and analytics for attendance patterns and student performance.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-bell"></i>
                    <h3>Smart Notifications</h3>
                    <p>Automatic alerts for low attendance, class reminders, and important updates.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Enterprise Security</h3>
                    <p>Bank-level encryption and secure authentication to protect sensitive data.</p>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="how-it-works">
            <div class="section-title">
                <h2>How It Works</h2>
                <p>Simple three-step process for efficient attendance management</p>
            </div>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Lecturer Starts Class</h3>
                    <p>Lecturer logs in and generates a unique QR code for the current lecture.</p>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Students Scan QR</h3>
                    <p>Students use the SmartTendance mobile app to scan the QR code displayed in class.</p>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Attendance Recorded</h3>
                    <p>Attendance is instantly recorded in the system with facial verification for accuracy.</p>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <h2>Ready to Transform Your Attendance Management?</h2>
            <p>Join hundreds of universities already using SmartTendance</p>
            
            <div style="margin: 40px 0;">
                <button class="btn-primary" style="padding: 20px 40px; font-size: 18px;" onclick="goToApp()">
                    <i class="fas fa-chalkboard-teacher"></i> Access Lecturer Portal
                </button>
            </div>
            
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <div>
                        <h4>Call Us</h4>
                        <p>+234 912 857 3586<br>+234 901 955 1312</p>
                    </div>
                </div>
                
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                        <h4>Email Us</h4>
                        <p>smartTendance.tech@gmail.com</p>
                    </div>
                </div>
                
                <div class="contact-item">
                    <i class="fas fa-globe"></i>
                    <div>
                        <h4>Visit Portal</h4>
                        <p>smarttendance-lecturer-v1.web.app</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="landing-footer">
            <div class="footer-content">
                <div style="margin-bottom: 20px;">
                    <div class="logo" style="justify-content: center;">
                        <div class="logo-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="logo-text">
                            <h1>SmartTendance</h1>
                            <p>AI-Powered Attendance System</p>
                        </div>
                    </div>
                </div>
                
                <p>Â© 2024 SmartTendance. All rights reserved.</p>
                <p style="margin-top: 10px; opacity: 0.7;">Advanced attendance management system for educational institutions</p>
                
                <div style="margin-top: 30px;">
                    <button class="btn-secondary" onclick="goToApp()">
                        <i class="fas fa-sign-in-alt"></i> Go to Lecturer Login
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- ==================== PWA ELEMENTS ==================== -->
    
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        <i class="fas fa-wifi"></i> You are currently offline
    </div>
    
    <!-- App Update Notification -->
    <div id="appUpdateNotification" class="app-update-notification">
        <div>
            <i class="fas fa-sync-alt"></i> New version available
        </div>
        <div class="app-update-buttons">
            <button class="dashboard-btn dashboard-btn-primary" onclick="updateApp()">
                Update Now
            </button>
            <button class="dashboard-btn dashboard-btn-danger" onclick="dismissUpdate()">
                Later
            </button>
        </div>
    </div>
    
    <!-- PWA Install Banner -->
    <div id="pwaInstallBanner" class="pwa-install-banner">
        <div class="pwa-install-content">
            <div class="pwa-install-icon">
                <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="pwa-install-text">
                <h4>Install SmartTendance</h4>
                <p>Get the full app experience on your device</p>
            </div>
        </div>
        <div class="pwa-install-buttons">
            <button class="dashboard-btn dashboard-btn-primary" onclick="installPWA()">
                Install
            </button>
            <button class="dashboard-btn dashboard-btn-danger" onclick="dismissInstallBanner()">
                Not Now
            </button>
        </div>
    </div>

    <!-- ==================== AUTHENTICATION SECTION ==================== -->
    <div id="authSection" class="auth-container">
        <div class="auth-box">
            <div class="auth-left">
                <div class="auth-left-content">
                    <!-- Beautiful App Icon -->
                    <div class="app-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h2>SmartTendance Lecturer Portal</h2>
                    <p>Advanced attendance management system designed specifically for university lecturers and professors.</p>
                    
                    <div class="features-list">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Real-time attendance tracking</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Automated reporting and analytics</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Secure authentication system</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>SmartTendance Student App integration</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="auth-right">
                <div class="auth-header">
                    <!-- Beautiful App Icon -->
                    <div class="app-icon" style="width: 60px; height: 60px; margin: 0 auto 15px;">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h1>Lecturer Authentication</h1>
                    <p>Access your attendance management dashboard</p>
                </div>
                
                <div class="auth-body">
                    <!-- Lecturer Badge -->
                    <div class="lecturer-badge">
                        <i class="fas fa-user-graduate"></i>
                        <span>Lecturer Portal</span>
                    </div>
                    
                    <div class="form-toggle">
                        <button class="toggle-btn active" id="loginToggle">Login</button>
                        <button class="toggle-btn" id="signupToggle">Sign Up</button>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="loginForm" class="auth-form active" autocomplete="off">
                        <div class="form-group">
                            <label for="loginId"><i class="fas fa-id-card"></i> Lecturer ID</label>
                            <div class="input-with-icon">
                                <input type="text" id="loginId" placeholder="Enter your lecturer ID" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            <div class="error-message" id="loginIdError">Please enter a valid lecturer ID</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword"><i class="fas fa-lock"></i> Password</label>
                            <div class="input-with-icon">
                                <input type="password" id="loginPassword" placeholder="Enter your password" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            <div class="error-message" id="loginPasswordError">Please enter your password</div>
                        </div>
                        
                        <div class="terms">
                            <input type="checkbox" id="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>
                        
                        <button type="submit" class="btn" id="loginButton">
                            <i class="fas fa-sign-in-alt"></i> Login to Lecturer Portal
                        </button>

                        <div class="forgot-password">
                            <a href="#" id="forgotPasswordLink">Forgot your password?</a>
                        </div>
                    </form>
                    
                    <!-- Signup Form -->
                    <form id="signupForm" class="auth-form" autocomplete="off">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fullName"><i class="fas fa-user"></i> Full Name</label>
                                <div class="input-with-icon">
                                    <input type="text" id="fullName" placeholder="Enter your full name" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                </div>
                                <div class="error-message" id="fullNameError">Please enter your full name</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email"><i class="fas fa-envelope"></i> Institutional Email</label>
                                <div class="input-with-icon">
                                    <input type="email" id="email" placeholder="Enter your institutional email" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                </div>
                                <div class="error-message" id="emailError">Please enter a valid institutional email</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="userId"><i class="fas fa-id-badge"></i> Lecturer ID</label>
                                <div class="input-with-icon">
                                    <input type="text" id="userId" placeholder="Enter your lecturer ID" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                </div>
                                <div class="error-message" id="userIdError">Please enter a valid lecturer ID</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="institution"><i class="fas fa-university"></i> University/College</label>
                                <div class="input-with-icon">
                                    <input type="text" id="institution" placeholder="Enter your institution" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                                </div>
                                <div class="error-message" id="institutionError">Please enter your institution</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="department"><i class="fas fa-building"></i> Department / Faculty</label>
                            <div class="input-with-icon">
                                <input type="text" id="department" placeholder="Enter your department" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            <div class="error-message" id="departmentError">Please enter your department</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="signupPassword"><i class="fas fa-key"></i> Password</label>
                            <div class="input-with-icon">
                                <input type="password" id="signupPassword" placeholder="Create a strong password" required autocomplete="new-password" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            
                            <!-- Password Strength Indicator -->
                            <div class="password-strength-container">
                                <div class="strength-meter">
                                    <div class="strength-fill" id="strengthFill"></div>
                                </div>
                                <div class="strength-text">
                                    <span class="strength-label" id="strengthLabel">Password strength</span>
                                    <span class="strength-value" id="strengthValue"></span>
                                </div>
                                <div class="strength-requirements">
                                    <div class="requirement invalid" id="reqLength">
                                        <i class="fas fa-circle"></i>
                                        <span>At least 8 characters</span>
                                    </div>
                                    <div class="requirement invalid" id="reqUppercase">
                                        <i class="fas fa-circle"></i>
                                        <span>Uppercase letter</span>
                                    </div>
                                    <div class="requirement invalid" id="reqLowercase">
                                        <i class="fas fa-circle"></i>
                                        <span>Lowercase letter</span>
                                    </div>
                                    <div class="requirement invalid" id="reqNumber">
                                        <i class="fas fa-circle"></i>
                                        <span>Number</span>
                                    </div>
                                    <div class="requirement invalid" id="reqSymbol">
                                        <i class="fas fa-circle"></i>
                                        <span>Symbol</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="error-message" id="signupPasswordError">Password must meet all requirements</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword"><i class="fas fa-key"></i> Confirm Password</label>
                            <div class="input-with-icon">
                                <input type="password" id="confirmPassword" placeholder="Confirm your password" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
                        </div>
                        
                        <div class="terms">
                            <input type="checkbox" id="agreeTerms" required>
                            <label for="agreeTerms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                        </div>
                        <div class="error-message" id="termsError">You must agree to the terms and conditions</div>
                        
                        <button type="submit" class="btn" id="signupButton">
                            <i class="fas fa-user-plus"></i> Create Lecturer Account
                        </button>
                    </form>

                    <!-- Forgot Password Form -->
                    <form id="forgotPasswordForm" class="auth-form" autocomplete="off">
                        <div class="form-group">
                            <label for="forgotEmail"><i class="fas fa-envelope"></i> Institutional Email</label>
                            <div class="input-with-icon">
                                <input type="email" id="forgotEmail" placeholder="Enter your institutional email" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            </div>
                            <div class="error-message" id="forgotEmailError">Please enter a valid institutional email</div>
                        </div>
                        
                        <button type="submit" class="btn" id="resetPasswordButton">
                            <i class="fas fa-paper-plane"></i> Send Reset Instructions
                        </button>

                        <div class="forgot-password">
                            <a href="#" id="backToLoginLink">Back to Login</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== DASHBOARD SECTION ==================== -->
    <div id="dashboard" class="app-container">
        <div class="header">
            <h1><i class="fas fa-chalkboard-teacher"></i> SmartTendance Lecturer Dashboard</h1>
            <p>Complete Lecture Attendance Management System with QR Codes</p>
            
            <!-- Lecturer Info Panel - Now positioned at top-right -->
            <div class="lecturer-info-panel" id="lecturerInfoPanel" style="display: none;">
                <div class="lecturer-avatar" id="lecturerAvatar">U</div>
                <div class="lecturer-details">
                    <h3 id="lecturerName">User Name</h3>
                    <p><strong>ID:</strong> <span id="lecturerId">LECT001</span></p>
                    <p><strong>Faculty:</strong> <span id="lecturerFaculty">Computer Science</span></p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showApp('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" onclick="showApp('attendanceManagement')">
                    <i class="fas fa-users"></i> Attendance Management
                </button>
                <button class="nav-btn" onclick="showApp('scheduleManagement')">
                    <i class="fas fa-calendar"></i> Schedule Management
                </button>
                <button class="nav-btn" onclick="showApp('studentScanner')">
                    <i class="fas fa-qrcode"></i> Student Scanner
                </button>
                <button class="nav-btn" onclick="showApp('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-chalkboard fa-2x"></i>
                <div class="stat-number" id="totalLectures">0</div>
                <div>Total Lectures</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-play-circle fa-2x"></i>
                <div class="stat-number" id="activeLectures">0</div>
                <div>Active Lectures</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-user-graduate fa-2x"></i>
                <div class="stat-number" id="totalStudents">0</div>
                <div>Total Students</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-chart-line fa-2x"></i>
                <div class="stat-number" id="attendanceRate">0%</div>
                <div>Attendance Rate</div>
            </div>
        </div>

        <div class="lectures-container">
            <div class="table-header">
                <h3><i class="fas fa-list"></i> Recent Lectures</h3>
                <div>
                    <button class="dashboard-btn dashboard-btn-primary" onclick="openNewLectureModal()">
                        <i class="fas fa-plus"></i> Start New Lecture
                    </button>
                    <button class="dashboard-btn dashboard-btn-danger" onclick="deleteSelectLectures()">
                        <i class="fas fa-trash"></i> Delete Select
                    </button>
                </div>
            </div>
            <table class="lectures-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAllLectures" onchange="toggleSelectAllLectures(this)"></th>
                        <th>Course</th>
                        <th>Date & Time</th>
                        <th>Room</th>
                        <th>Students</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="lecturesTableBody">
                    <!-- Lectures will be loaded here -->
                    <tr>
                        <td colspan="7" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Lectures Started Yet</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                Welcome to SmartTendance! Start your first lecture to begin tracking attendance.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="openNewLectureModal()">
                                <i class="fas fa-plus"></i> Start Your First Lecture
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ATTENDANCE MANAGEMENT -->
    <div id="attendanceManagement" class="app-container">
        <div class="header">
            <h1><i class="fas fa-users"></i> Attendance Management</h1>
            <p>Track and manage student attendance records</p>
            
            <!-- Lecturer Info Panel -->
            <div class="lecturer-info-panel" id="lecturerInfoPanelAttendance" style="display: none;">
                <div class="lecturer-avatar" id="lecturerAvatarAttendance">U</div>
                <div class="lecturer-details">
                    <h3 id="lecturerNameAttendance">User Name</h3>
                    <p><strong>ID:</strong> <span id="lecturerIdAttendance">LECT001</span></p>
                    <p><strong>Faculty:</strong> <span id="lecturerFacultyAttendance">Computer Science</span></p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showApp('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn active" onclick="showApp('attendanceManagement')">
                    <i class="fas fa-users"></i> Attendance Management
                </button>
                <button class="nav-btn" onclick="showApp('scheduleManagement')">
                    <i class="fas fa-calendar"></i> Schedule Management
                </button>
                <button class="nav-btn" onclick="showApp('studentScanner')">
                    <i class="fas fa-qrcode"></i> Student Scanner
                </button>
                <button class="nav-btn" onclick="showApp('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <div class="filters">
            <div class="filter-group">
                <label><i class="fas fa-book"></i> Course</label>
                <select id="courseFilter" autocomplete="off">
                    <option value="all">All Courses</option>
                </select>
            </div>
            <div class="filter-group">
                <label><i class="fas fa-calendar"></i> Date From</label>
                <input type="date" id="dateFrom" autocomplete="off">
            </div>
            <div class="filter-group">
                <label><i class="fas fa-calendar"></i> Date To</label>
                <input type="date" id="dateTo" autocomplete="off">
            </div>
            <div class="filter-group">
                <label><i class="fas fa-user-check"></i> Status</label>
                <select id="statusFilter" autocomplete="off">
                    <option value="all">All Status</option>
                    <option value="present">Present</option>
                    <option value="absent">Absent</option>
                </select>
            </div>
            <button class="dashboard-btn dashboard-btn-primary" style="align-self: flex-end;" onclick="applyFilters()">
                <i class="fas fa-filter"></i> Apply Filters
            </button>
        </div>

        <div class="attendance-summary">
            <div class="summary-card">
                <i class="fas fa-list-alt fa-2x"></i>
                <div class="stat-number" id="totalRecords">0</div>
                <div>Total Records</div>
            </div>
            <div class="summary-card">
                <i class="fas fa-calendar-day fa-2x"></i>
                <div class="stat-number" id="presentToday">0%</div>
                <div>Present Today</div>
            </div>
            <div class="summary-card">
                <i class="fas fa-calendar-week fa-2x"></i>
                <div class="stat-number" id="presentWeek">0%</div>
                <div>This Week</div>
            </div>
            <div class="summary-card">
                <i class="fas fa-calendar-alt fa-2x"></i>
                <div class="stat-number" id="presentMonth">0%</div>
                <div>This Month</div>
            </div>
        </div>

        <div class="lectures-container">
            <div class="table-header">
                <h3><i class="fas fa-table"></i> Attendance Records</h3>
                <div>
                    <button class="dashboard-btn dashboard-btn-primary" onclick="exportAttendance('excel')">
                        <i class="fas fa-download"></i> Export Excel
                    </button>
                    <button class="dashboard-btn dashboard-btn-primary" onclick="exportAttendance('csv')">
                        <i class="fas fa-download"></i> Export CSV
                    </button>
                    <button class="dashboard-btn dashboard-btn-primary" onclick="exportAttendance('pdf')">
                        <i class="fas fa-download"></i> Export PDF
                    </button>
                    <button class="dashboard-btn dashboard-btn-danger" onclick="deleteAllAttendance()">
                        <i class="fas fa-trash"></i> Delete All
                    </button>
                </div>
            </div>
            <table class="lectures-table">
                <thead>
                    <tr>
                        <th>Student ID</th>
                        <th>Student Name</th>
                        <th>Course Name</th>
                        <th>Course Code</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="attendanceTableBody">
                    <!-- Attendance records will be loaded here -->
                    <tr>
                        <td colspan="8" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-users-slash"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Attendance Records</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                No attendance records found yet. Students will appear here after scanning QR codes with the SmartTendance app.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="showApp('dashboard')">
                                <i class="fas fa-arrow-left"></i> Go to Dashboard to Start a Lecture
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- SCHEDULE MANAGEMENT -->
    <div id="scheduleManagement" class="app-container">
        <div class="header">
            <h1><i class="fas fa-calendar"></i> Schedule Management</h1>
            <p>Plan and manage lecture schedules</p>
            
            <!-- Lecturer Info Panel -->
            <div class="lecturer-info-panel" id="lecturerInfoPanelSchedule" style="display: none;">
                <div class="lecturer-avatar" id="lecturerAvatarSchedule">U</div>
                <div class="lecturer-details">
                    <h3 id="lecturerNameSchedule">User Name</h3>
                    <p><strong>ID:</strong> <span id="lecturerIdSchedule">LECT001</span></p>
                    <p><strong>Faculty:</strong> <span id="lecturerFacultySchedule">Computer Science</span></p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showApp('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" onclick="showApp('attendanceManagement')">
                    <i class="fas fa-users"></i> Attendance Management
                </button>
                <button class="nav-btn active" onclick="showApp('scheduleManagement')">
                    <i class="fas fa-calendar"></i> Schedule Management
                </button>
                <button class="nav-btn" onclick="showApp('studentScanner')">
                    <i class="fas fa-qrcode"></i> Student Scanner
                </button>
                <button class="nav-btn" onclick="showApp('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <div class="calendar">
            <div class="calendar-header">
                <button class="dashboard-btn dashboard-btn-primary" onclick="previousMonth()">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <h3 id="currentMonth">June 2024</h3>
                <button class="dashboard-btn dashboard-btn-primary" onclick="nextMonth()">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Calendar days will be generated here -->
            </div>
        </div>

        <div class="lectures-container">
            <div class="table-header">
                <h3><i class="fas fa-clock"></i> Lecture Schedule</h3>
                <button class="dashboard-btn dashboard-btn-primary" onclick="openScheduleModal()">
                    <i class="fas fa-plus"></i> Add New Schedule
                </button>
            </div>
            <table class="lectures-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="selectAllSchedules" onchange="toggleSelectAllSchedules(this)"></th>
                        <th>Course Name</th>
                        <th>Course Code</th>
                        <th>Day</th>
                        <th>Time</th>
                        <th>Room</th>
                        <th>Recurring</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="scheduleTableBody">
                    <!-- Schedule records will be loaded here -->
                    <tr>
                        <td colspan="8" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-calendar-plus"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Schedules Created</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                Create lecture schedules to help organize your teaching timetable.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="openScheduleModal()">
                                <i class="fas fa-plus"></i> Create Your First Schedule
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- STUDENT SCANNER -->
    <div id="studentScanner" class="app-container">
        <div class="header">
            <h1><i class="fas fa-qrcode"></i> Student Scanner</h1>
            <p>QR Code-based attendance system</p>
            
            <!-- Lecturer Info Panel -->
            <div class="lecturer-info-panel" id="lecturerInfoPanelScanner" style="display: none;">
                <div class="lecturer-avatar" id="lecturerAvatarScanner">U</div>
                <div class="lecturer-details">
                    <h3 id="lecturerNameScanner">User Name</h3>
                    <p><strong>ID:</strong> <span id="lecturerIdScanner">LECT001</span></p>
                    <p><strong>Faculty:</strong> <span id="lecturerFacultyScanner">Computer Science</span></p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showApp('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" onclick="showApp('attendanceManagement')">
                    <i class="fas fa-users"></i> Attendance Management
                </button>
                <button class="nav-btn" onclick="showApp('scheduleManagement')">
                    <i class="fas fa-calendar"></i> Schedule Management
                </button>
                <button class="nav-btn active" onclick="showApp('studentScanner')">
                    <i class="fas fa-qrcode"></i> Student Scanner
                </button>
                <button class="nav-btn" onclick="showApp('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <div class="scanner-container">
            <div style="font-size: 48px; margin-bottom: 20px;">
                <i class="fas fa-mobile-alt"></i> <i class="fas fa-arrow-right"></i> <i class="fas fa-qrcode"></i>
            </div>
            <h3 style="color: #44ff44; margin-bottom: 10px;">SmartTendance App Scanner Instructions</h3>
            <p style="color: #ccc; margin-bottom: 30px;">Students use the SmartTendance mobile app to scan QR codes and mark attendance</p>
            
            <div class="scanner-placeholder">
                <div style="text-align: center; color: #44ff44;">
                    <div style="font-size: 64px;"><i class="fas fa-qrcode"></i></div>
                    <p>QR Code Display</p>
                    <p>Generated from Dashboard</p>
                </div>
            </div>
            
            <div class="scanner-instructions-full">
                <h4><i class="fas fa-info-circle"></i> How it works:</h4>
                <ol>
                    <li>Lecturer starts a lecture from the Dashboard</li>
                    <li>Lecturer clicks "Show QR" to display the QR code</li>
                    <li>Students open the SmartTendance app on their phones</li>
                    <li>Students use the in-app scanner to scan the QR code</li>
                    <li>Attendance is automatically recorded in the system</li>
                </ol>
                
                <div style="background: #113311; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #44ff44;">
                    <h5 style="color: #44ff44; margin-bottom: 10px;"><i class="fas fa-mobile-alt"></i> SmartTendance Student App</h5>
                    <p style="color: #ccc; font-size: 14px;">Students must download and install the official SmartTendance mobile app from the App Store or Google Play Store to scan QR codes and mark attendance.</p>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="dashboard-btn dashboard-btn-primary" style="padding: 15px 30px; font-size: 16px;" onclick="showApp('dashboard')">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard to Generate QR Code
                </button>
            </div>
        </div>
    </div>

    <!-- SETTINGS -->
    <div id="settings" class="app-container">
        <div class="header">
            <h1><i class="fas fa-cog"></i> Settings</h1>
            <p>Customize your SmartTendance experience</p>
            
            <!-- Lecturer Info Panel -->
            <div class="lecturer-info-panel" id="lecturerInfoPanelSettings" style="display: none;">
                <div class="lecturer-avatar" id="lecturerAvatarSettings">U</div>
                <div class="lecturer-details">
                    <h3 id="lecturerNameSettings">User Name</h3>
                    <p><strong>ID:</strong> <span id="lecturerIdSettings">LECT001</span></p>
                    <p><strong>Faculty:</strong> <span id="lecturerFacultySettings">Computer Science</span></p>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showApp('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" onclick="showApp('attendanceManagement')">
                    <i class="fas fa-users"></i> Attendance Management
                </button>
                <button class="nav-btn" onclick="showApp('scheduleManagement')">
                    <i class="fas fa-calendar"></i> Schedule Management
                </button>
                <button class="nav-btn" onclick="showApp('studentScanner')">
                    <i class="fas fa-qrcode"></i> Student Scanner
                </button>
                <button class="nav-btn active" onclick="showApp('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <div class="settings-container">
            <div class="settings-card">
                <h3><i class="fas fa-language"></i> Language & Region</h3>
                <div class="setting-item">
                    <span>Interface Language</span>
                    <select id="interfaceLanguage" onchange="changeLanguage(this.value)" autocomplete="off">
                        <option value="en">English</option>
                        <option value="fr">FranÃ§ais (French)</option>
                        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)</option>
                        <option value="es">EspaÃ±ol (Spanish)</option>
                        <option value="zh">ä¸­æ–‡ (Chinese)</option>
                        <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€ (Hindi)</option>
                    </select>
                </div>
                <div class="setting-item">
                    <span>Date Format</span>
                    <select id="dateFormat" autocomplete="off">
                        <option value="MM/DD/YYYY">MM/DD/YYYY (US)</option>
                        <option value="DD/MM/YYYY">DD/MM/YYYY (EU)</option>
                        <option value="YYYY-MM-DD">YYYY-MM-DD (ISO)</option>
                    </select>
                </div>
                <div class="setting-item">
                    <span>Time Format</span>
                    <select id="timeFormat" autocomplete="off">
                        <option value="12h">12-hour (AM/PM)</option>
                        <option value="24h">24-hour</option>
                    </select>
                </div>
            </div>

            <div class="settings-card">
                <h3><i class="fas fa-palette"></i> Appearance</h3>
                <div class="setting-item">
                    <span>Dark Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="darkModeToggle" checked onchange="toggleDarkMode(this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span>Font Size</span>
                    <select id="fontSize" autocomplete="off">
                        <option value="small">Small</option>
                        <option value="medium" selected>Medium</option>
                        <option value="large">Large</option>
                    </select>
                </div>
            </div>

            <div class="settings-card">
                <h3><i class="fas fa-bell"></i> Notifications</h3>
                <div class="setting-item">
                    <span>Lecture Reminders</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lectureReminders" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span>Attendance Alerts</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="attendanceAlerts" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-card">
                <h3><i class="fas fa-database"></i> Data Management</h3>
                <div class="setting-item">
                    <span>Auto Backup</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoBackup">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span>Export Format</span>
                    <select id="exportFormat" autocomplete="off">
                        <option value="excel">Excel</option>
                        <option value="csv">CSV</option>
                        <option value="pdf">PDF</option>
                    </select>
                </div>
            </div>
            
            <div class="settings-card">
                <h3><i class="fas fa-qrcode"></i> QR Code Settings</h3>
                <div class="setting-item">
                    <span>QR Code Expiry Time</span>
                    <select id="qrExpiryTime" autocomplete="off">
                        <option value="5">5 minutes</option>
                        <option value="10" selected>10 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="30">30 minutes</option>
                    </select>
                </div>
                <div class="setting-item">
                    <span>Auto-refresh QR Codes</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoRefreshQR" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="settings-card">
                <h3><i class="fas fa-robot"></i> Auto Scan Settings</h3>
                <div class="setting-item">
                    <span>Enable Automatic Scanning</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoScanToggle" checked onchange="toggleAutoScan(this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <span>Scan Interval</span>
                    <select id="scanInterval" onchange="updateScanInterval(this.value)" autocomplete="off">
                        <option value="3">3 seconds</option>
                        <option value="5" selected>5 seconds</option>
                        <option value="10">10 seconds</option>
                        <option value="15">15 seconds</option>
                    </select>
                </div>
                <div class="setting-item">
                    <span>Max Students per Scan</span>
                    <select id="maxStudents" onchange="updateMaxStudents(this.value)" autocomplete="off">
                        <option value="1">1 student</option>
                        <option value="2">2 students</option>
                        <option value="3" selected>3 students</option>
                        <option value="5">5 students</option>
                    </select>
                </div>
            </div>
            
            <!-- Logout Section inside Settings -->
            <div class="settings-card logout-section">
                <h3><i class="fas fa-sign-out-alt"></i> Logout</h3>
                <div class="setting-item">
                    <span>Sign out of your account</span>
                    <button class="dashboard-btn dashboard-btn-danger" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW LECTURE MODAL -->
    <div id="newLectureModal" class="modal">
        <div class="modal-content">
            <h3 style="color: #44ff44;"><i class="fas fa-plus"></i> Start New Lecture</h3>
            <form id="newLectureForm" autocomplete="off">
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Code (e.g., CS101)</label>
                    <input type="text" id="newLectureCourseCode" placeholder="Enter course code" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Name</label>
                    <input type="text" id="newLectureCourseName" placeholder="Enter course name" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-door-open"></i> Room</label>
                    <input type="text" id="newLectureRoom" placeholder="Enter room number" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-users"></i> Number of Students</label>
                    <input type="number" id="newLectureStudents" placeholder="Enter number of students" min="1" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="modal-buttons">
                    <button type="button" onclick="closeNewLectureModal()" class="dashboard-btn dashboard-btn-danger">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="dashboard-btn dashboard-btn-primary">
                        <i class="fas fa-play"></i> Start Lecture
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- QR CODE MODAL -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <h3 style="color: #44ff44;"><i class="fas fa-qrcode"></i> Attendance QR Code</h3>
            
            <div class="qr-code-container" id="qrCodeContainer">
                <!-- QR Code will be generated here -->
                <div style="text-align: center; color: #000;">
                    <i class="fas fa-spinner fa-spin fa-2x"></i>
                    <p>Generating QR Code...</p>
                </div>
            </div>
            
            <div class="qr-timer" id="qrTimer">
                <span>Valid for:</span> <span id="timerValue">10:00</span>
            </div>

            <!-- Live Scanning Indicator -->
            <div class="live-scanning-indicator">
                <i class="fas fa-satellite-dish"></i> LIVE SCANNING
            </div>

            <!-- Auto Scan Status -->
            <div class="auto-scan-status">
                <h4><i class="fas fa-robot"></i> Automatic Scanning Active</h4>
                <p id="autoScanInfo">Waiting for student scans...</p>
                
                <div class="scan-progress">
                    <div class="scan-progress-bar" id="scanProgressBar"></div>
                </div>
                
                <p id="scanStats"><span id="scannedCount">0</span> students scanned / <span id="totalStudentsCount">0</span> total students</p>
            </div>
            
            <div class="qr-info">
                <p><strong>Course Code:</strong> <span id="qrCourseCode">CS101</span></p>
                <p><strong>Course Name:</strong> <span id="qrCourseName">Computer Science 101</span></p>
                <p><strong>Room:</strong> <span id="qrLectureRoom">Room 301</span></p>
                <p><strong>Students:</strong> <span id="qrLectureStudents">45</span></p>
                <p><strong>Lecture ID:</strong> <span id="qrLectureId" style="font-size: 10px; word-break: break-all;"></span></p>
            </div>
            
            <div class="scan-instruction">
                <h3><i class="fas fa-bolt" style="color: #44ff44;"></i> Instant Live Scanning</h3>
                <p>Attendance appears <strong>IMMEDIATELY</strong> after scanning with SmartTendance app</p>
                <div style="background: #113311; padding: 10px; border-radius: 5px; margin: 10px 0; border: 1px solid #44ff44;">
                    <i class="fas fa-sync-alt fa-spin" style="color: #44ff44;"></i>
                    <strong>LIVE UPDATING:</strong> 
                    <span id="liveStatus">Waiting for scans...</span>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button onclick="closeQRModal()" class="dashboard-btn dashboard-btn-danger">
                    <i class="fas fa-times"></i> Close
                </button>
                <button onclick="refreshQRCode()" class="dashboard-btn dashboard-btn-primary">
                    <i class="fas fa-sync-alt"></i> Refresh QR
                </button>
                <button id="liveRefreshBtn" class="dashboard-btn dashboard-btn-primary" onclick="forceRefreshAttendance(currentLectureId)">
                    <i class="fas fa-bolt"></i> Force Refresh
                </button>
            </div>
        </div>
    </div>

    <!-- NEW SCHEDULE MODAL -->
    <div id="newScheduleModal" class="modal">
        <div class="modal-content">
            <h3 style="color: #44ff44;"><i class="fas fa-plus"></i> Add New Schedule</h3>
            <form id="newScheduleForm" autocomplete="off">
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Code (e.g., CS101)</label>
                    <input type="text" id="newScheduleCourseCode" placeholder="Enter course code" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Name</label>
                    <input type="text" id="newScheduleCourseName" placeholder="Enter course name" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-calendar-day"></i> Day</label>
                    <select id="newScheduleDay" autocomplete="off">
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                        <option value="Saturday">Saturday</option>
                        <option value="Sunday">Sunday</option>
                    </select>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-clock"></i> Start Time</label>
                    <input type="time" id="newScheduleStartTime" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-clock"></i> End Time</label>
                    <input type="time" id="newScheduleEndTime" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-door-open"></i> Room</label>
                    <input type="text" id="newScheduleRoom" placeholder="Enter room number" required autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-redo"></i> Recurring</label>
                    <select id="newScheduleRecurring" autocomplete="off">
                        <option value="Weekly">Weekly</option>
                        <option value="Daily">Daily</option>
                        <option value="Monthly">Monthly</option>
                        <option value="Once">Once</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button type="button" onclick="closeNewScheduleModal()" class="dashboard-btn dashboard-btn-danger">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="dashboard-btn dashboard-btn-primary">
                        <i class="fas fa-plus"></i> Add Schedule
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p id="loadingMessage">Processing...</p>
    </div>

    <!-- Result Modal -->
    <div class="result-modal" id="resultModal" style="display: none;">
        <div class="result-content" id="resultContent">
            <div class="result-icon" id="resultIcon"></div>
            <h3 id="resultTitle">Success</h3>
            <p id="resultMessage" style="margin: 15px 0;"></p>
            <button class="btn" onclick="closeResult()" style="background: #44ff44; color: #000;">
                Continue
            </button>
        </div>
    </div>

    <!-- MANUAL ENTRY MODAL for users without phones -->
    <div id="manualEntryModal" class="modal">
        <div class="modal-content">
            <h3 style="color: #44ff44;"><i class="fas fa-keyboard"></i> Manual Student Entry</h3>
            <p style="margin-bottom: 20px;">Enter student details manually for students without phones</p>
            
            <form id="manualEntryForm" autocomplete="off">
                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> Student ID</label>
                    <input type="text" id="manualStudentId" placeholder="Enter student ID" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Student Name</label>
                    <input type="text" id="manualStudentName" placeholder="Enter student name" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Student Email (Optional)</label>
                    <input type="email" id="manualStudentEmail" placeholder="Enter student email" autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Code</label>
                    <input type="text" id="manualCourseCode" placeholder="Enter course code" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-book"></i> Course Name</label>
                    <input type="text" id="manualCourseName" placeholder="Enter course name" required autocomplete="off">
                </div>
                <div class="modal-buttons">
                    <button type="button" onclick="closeManualEntryModal()" class="dashboard-btn dashboard-btn-danger">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button type="submit" class="dashboard-btn dashboard-btn-primary">
                        <i class="fas fa-check"></i> Mark Attendance
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ==================== LANDING PAGE FUNCTIONS ====================
        function toggleMobileMenu() {
            const nav = document.querySelector('.landing-nav');
            nav.classList.toggle('active');
        }

        function goToApp() {
            // Hide landing page
            document.getElementById('landingPage').classList.remove('active');
            
            // Show authentication section
            document.getElementById('authSection').style.display = 'flex';
            document.getElementById('dashboard').classList.remove('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function scrollToFeatures() {
            const features = document.getElementById('features');
            features.scrollIntoView({ behavior: 'smooth' });
        }

        // ==================== MAIN APPLICATION CODE ====================
        let currentUser = null;
        let users = [];
        let lectures = [];
        let schedules = [];
        let currentLectureId = null;
        let qrTimerInterval;
        let realTimeListener = null;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBN0KexNQkEegTvAUA815xJrBqPUa45SOk",
            authDomain: "smarttendance-a355b.firebaseapp.com",
            databaseURL: "https://smarttendance-a355b-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "smarttendance-a355b",
            storageBucket: "smarttendance-a355b.firebasestorage.app",
            messagingSenderId: "448589697375",
            appId: "1:448589697375:web:d5b02d378ba9746a68a6ea"
        };

        // Initialize Firebase
        let app, database, db, auth;
        
        try {
            app = firebase.initializeApp(firebaseConfig);
            database = firebase.database();
            db = firebase.firestore();
            auth = firebase.auth();
            console.log("âœ… Firebase initialized successfully!");
        } catch (error) {
            console.error("âŒ Firebase initialization error:", error);
            database = createMockFirebase();
        }

        // Initialize the application
        function initApp() {
            // Show landing page by default
            document.getElementById('landingPage').classList.add('active');
            
            // Check if user is already logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    showDashboard();
                } catch (e) {
                    console.error("Error parsing saved user:", e);
                    localStorage.removeItem('currentUser');
                }
            }
            
            // Load saved data
            const savedLectures = localStorage.getItem('lectures');
            const savedSchedules = localStorage.getItem('schedules');
            const savedUsers = localStorage.getItem('smartTendanceUsers');
            
            if (savedLectures) {
                try {
                    lectures = JSON.parse(savedLectures);
                } catch (e) {
                    console.error("Error parsing lectures:", e);
                }
            }
            
            if (savedSchedules) {
                try {
                    schedules = JSON.parse(savedSchedules);
                } catch (e) {
                    console.error("Error parsing schedules:", e);
                }
            }
            
            if (savedUsers) {
                try {
                    users = JSON.parse(savedUsers);
                } catch (e) {
                    console.error("Error parsing users:", e);
                }
            }
            
            // Set up event listeners
            setupEventListeners();
            
            // Initialize PWA
            initPWA();
        }

        function setupEventListeners() {
            // Auth form toggles
            document.getElementById('loginToggle').addEventListener('click', () => showLoginForm());
            document.getElementById('signupToggle').addEventListener('click', () => showSignupForm());
            
            // Form links
            document.getElementById('forgotPasswordLink').addEventListener('click', (e) => {
                e.preventDefault();
                showForgotPasswordForm();
            });
            
            document.getElementById('backToLoginLink').addEventListener('click', (e) => {
                e.preventDefault();
                showLoginForm();
            });
            
            // Form submissions
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                handleLogin();
            });
            
            document.getElementById('signupForm').addEventListener('submit', (e) => {
                e.preventDefault();
                handleSignup();
            });
            
            document.getElementById('forgotPasswordForm').addEventListener('submit', (e) => {
                e.preventDefault();
                handleForgotPassword();
            });
            
            document.getElementById('newLectureForm').addEventListener('submit', (e) => {
                e.preventDefault();
                createNewLecture();
            });
            
            document.getElementById('newScheduleForm').addEventListener('submit', (e) => {
                e.preventDefault();
                createNewSchedule();
            });
            
            document.getElementById('manualEntryForm').addEventListener('submit', (e) => {
                e.preventDefault();
                handleManualEntry();
            });
            
            // Real-time validation
            setupRealTimeValidation();
        }

        // ==================== AUTHENTICATION FUNCTIONS ====================
        function showLoginForm() {
            document.getElementById('loginForm').classList.add('active');
            document.getElementById('signupForm').classList.remove('active');
            document.getElementById('forgotPasswordForm').classList.remove('active');
            document.getElementById('loginToggle').classList.add('active');
            document.getElementById('signupToggle').classList.remove('active');
        }

        function showSignupForm() {
            document.getElementById('signupForm').classList.add('active');
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('forgotPasswordForm').classList.remove('active');
            document.getElementById('signupToggle').classList.add('active');
            document.getElementById('loginToggle').classList.remove('active');
        }

        function showForgotPasswordForm() {
            document.getElementById('forgotPasswordForm').classList.add('active');
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('signupForm').classList.remove('active');
            document.getElementById('loginToggle').classList.remove('active');
            document.getElementById('signupToggle').classList.remove('active');
        }

        async function handleSignup() {
            const name = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const userId = document.getElementById('userId').value;
            const institution = document.getElementById('institution').value;
            const department = document.getElementById('department').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // Validate form
            if (!validateSignupForm()) return;
            
            showLoading('Creating your lecturer account...');
            
            try {
                // Create user in Firebase Authentication
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                const firebaseUser = userCredential.user;
                
                // Create lecturer profile
                const lecturerProfile = {
                    id: firebaseUser.uid,
                    name: name,
                    email: email,
                    userId: userId,
                    institution: institution,
                    department: department,
                    role: 'lecturer',
                    createdAt: new Date().toISOString()
                };
                
                // Save to Firestore
                await firebase.firestore().collection('lecturers').doc(firebaseUser.uid).set(lecturerProfile);
                
                // Save locally
                users.push(lecturerProfile);
                localStorage.setItem('smartTendanceUsers', JSON.stringify(users));
                
                // Auto-login
                currentUser = lecturerProfile;
                localStorage.setItem('currentUser', JSON.stringify(lecturerProfile));
                
                hideLoading();
                showResult('success', 'Account Created!', 'Your lecturer account has been created successfully.');
                
                setTimeout(() => {
                    showDashboard();
                }, 2000);
                
            } catch (error) {
                hideLoading();
                console.error("Signup error:", error);
                showResult('error', 'Registration Failed', error.message);
            }
        }

        async function handleLogin() {
            const idNumber = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            
            showLoading('Signing in...');
            
            try {
                // Try Firebase authentication first
                // First, find the user by email in our local users array
                const localUser = users.find(u => u.userId === idNumber);
                
                if (!localUser) {
                    // Try to find in Firestore
                    const usersSnapshot = await firebase.firestore().collection('lecturers')
                        .where('userId', '==', idNumber)
                        .get();
                    
                    if (usersSnapshot.empty) {
                        throw new Error('Invalid lecturer ID or password');
                    }
                    
                    const userDoc = usersSnapshot.docs[0];
                    const firebaseUserData = userDoc.data();
                    
                    // Try to login with email and password
                    try {
                        await firebase.auth().signInWithEmailAndPassword(firebaseUserData.email, password);
                        currentUser = firebaseUserData;
                        localStorage.setItem('currentUser', JSON.stringify(firebaseUserData));
                        
                        // Add to local users if not exists
                        if (!users.find(u => u.userId === firebaseUserData.userId)) {
                            users.push(firebaseUserData);
                            localStorage.setItem('smartTendanceUsers', JSON.stringify(users));
                        }
                    } catch (authError) {
                        throw new Error('Invalid lecturer ID or password');
                    }
                } else {
                    // Login with local user
                    try {
                        await firebase.auth().signInWithEmailAndPassword(localUser.email, password);
                        currentUser = localUser;
                        localStorage.setItem('currentUser', JSON.stringify(localUser));
                    } catch (authError) {
                        // Fallback to local authentication for demo
                        if (password === 'demo123') { // Default demo password
                            currentUser = localUser;
                            localStorage.setItem('currentUser', JSON.stringify(localUser));
                        } else {
                            throw new Error('Invalid lecturer ID or password');
                        }
                    }
                }
                
                hideLoading();
                showResult('success', 'Login Successful!', `Welcome back, ${currentUser.name}!`);
                
                setTimeout(() => {
                    showDashboard();
                }, 2000);
                
            } catch (error) {
                hideLoading();
                console.error("Login error:", error);
                showResult('error', 'Login Failed', error.message);
            }
        }

        async function handleForgotPassword() {
            const email = document.getElementById('forgotEmail').value;
            
            showLoading('Sending reset instructions...');
            
            try {
                await firebase.auth().sendPasswordResetEmail(email);
                hideLoading();
                showResult('success', 'Check Your Email', 'Password reset instructions have been sent to your email.');
                showLoginForm();
            } catch (error) {
                hideLoading();
                showResult('success', 'Check Your Email', 'If this email is registered, reset instructions have been sent.');
            }
        }

        function logout() {
            firebase.auth().signOut().then(() => {
                currentUser = null;
                localStorage.removeItem('currentUser');
                
                // Show landing page
                document.getElementById('landingPage').classList.add('active');
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('dashboard').classList.remove('active');
                
                // Show login form
                showLoginForm();
                
                showNotification('info', 'Logged Out', 'You have been successfully logged out.');
            }).catch((error) => {
                console.error("Logout error:", error);
                // Still logout locally
                currentUser = null;
                localStorage.removeItem('currentUser');
                document.getElementById('landingPage').classList.add('active');
                document.getElementById('authSection').style.display = 'none';
                showLoginForm();
            });
        }

        // ==================== DASHBOARD FUNCTIONS ====================
        function showDashboard() {
            // Hide other sections
            document.getElementById('landingPage').classList.remove('active');
            document.getElementById('authSection').style.display = 'none';
            
            // Show dashboard
            document.getElementById('dashboard').classList.add('active');
            document.getElementById('attendanceManagement').classList.remove('active');
            document.getElementById('scheduleManagement').classList.remove('active');
            document.getElementById('studentScanner').classList.remove('active');
            document.getElementById('settings').classList.remove('active');
            
            // Update lecturer info
            updateLecturerInfo(currentUser);
            
            // Load dashboard data
            loadDashboard();
        }

        function showApp(appName) {
            // Hide all app containers
            document.querySelectorAll('.app-container').forEach(app => {
                app.classList.remove('active');
            });
            
            // Show selected app
            document.getElementById(appName).classList.add('active');
            
            // Update active nav button
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Update lecturer info
            updateLecturerInfo(currentUser);
            
            // Load specific data
            if (appName === 'dashboard') {
                loadDashboard();
            } else if (appName === 'attendanceManagement') {
                loadAttendanceManagement();
            } else if (appName === 'scheduleManagement') {
                loadScheduleManagement();
            }
        }

        function updateLecturerInfo(user) {
            const panels = [
                'lecturerInfoPanel',
                'lecturerInfoPanelAttendance',
                'lecturerInfoPanelSchedule',
                'lecturerInfoPanelScanner',
                'lecturerInfoPanelSettings'
            ];
            
            panels.forEach(panelId => {
                const panel = document.getElementById(panelId);
                if (panel && user) {
                    panel.style.display = 'flex';
                    
                    // Get avatar element - handle different naming conventions
                    const avatar = panel.querySelector('.lecturer-avatar');
                    const name = panel.querySelector('#lecturerName, #lecturerNameAttendance, #lecturerNameSchedule, #lecturerNameScanner, #lecturerNameSettings');
                    const id = panel.querySelector('#lecturerId, #lecturerIdAttendance, #lecturerIdSchedule, #lecturerIdScanner, #lecturerIdSettings');
                    const faculty = panel.querySelector('#lecturerFaculty, #lecturerFacultyAttendance, #lecturerFacultySchedule, #lecturerFacultyScanner, #lecturerFacultySettings');
                    
                    if (avatar) {
                        avatar.textContent = user.name ? user.name.charAt(0).toUpperCase() : 'U';
                    }
                    
                    if (name) name.textContent = user.name || 'User Name';
                    if (id) id.textContent = user.userId || 'LECT001';
                    if (faculty) faculty.textContent = user.department || 'Computer Science';
                } else if (panel) {
                    panel.style.display = 'none';
                }
            });
        }

        async function loadDashboard() {
            // Update stats
            await updateDashboardStats();
            
            // Update lectures table
            updateLecturesTable();
        }

        async function updateDashboardStats() {
            try {
                // Get lectures from Firebase
                const lecturesRef = database.ref('lectures');
                const snapshot = await lecturesRef.once('value');
                const firebaseLectures = snapshot.val() || {};
                
                // Filter lectures by current user
                const userLectures = {};
                Object.keys(firebaseLectures).forEach(key => {
                    const lecture = firebaseLectures[key];
                    if (lecture.lecturerId === currentUser?.userId) {
                        userLectures[key] = lecture;
                    }
                });
                
                // Calculate stats
                const totalLectures = Object.keys(userLectures).length;
                const activeLectures = Object.values(userLectures).filter(l => l.status === 'active').length;
                
                // Update UI
                document.getElementById('totalLectures').textContent = totalLectures;
                document.getElementById('activeLectures').textContent = activeLectures;
                
                // Get attendance data
                const attendanceRef = database.ref('attendance');
                const attendanceSnapshot = await attendanceRef.once('value');
                const attendanceData = attendanceSnapshot.val() || {};
                
                // Calculate attendance rate
                let totalStudents = 0;
                let presentStudents = 0;
                
                Object.keys(userLectures).forEach(lectureId => {
                    if (attendanceData[lectureId]) {
                        const lectureAttendance = attendanceData[lectureId];
                        const attendanceCount = Object.keys(lectureAttendance).length;
                        totalStudents += userLectures[lectureId].students || 0;
                        presentStudents += attendanceCount;
                    }
                });
                
                const attendanceRate = totalStudents > 0 ? Math.round((presentStudents / totalStudents) * 100) : 0;
                
                document.getElementById('totalStudents').textContent = totalStudents;
                document.getElementById('attendanceRate').textContent = attendanceRate + '%';
                
                // Update local lectures array
                lectures = Object.keys(userLectures).map(key => ({
                    firebaseId: key,
                    ...userLectures[key]
                }));
                
                localStorage.setItem('lectures', JSON.stringify(lectures));
                
            } catch (error) {
                console.error('Error updating dashboard stats:', error);
                // Fallback to local data
                const userLectures = lectures.filter(l => l.lecturerId === currentUser?.userId);
                document.getElementById('totalLectures').textContent = userLectures.length;
                document.getElementById('activeLectures').textContent = userLectures.filter(l => l.status === 'active').length;
                document.getElementById('totalStudents').textContent = '0';
                document.getElementById('attendanceRate').textContent = '0%';
            }
        }

        function updateLecturesTable() {
            const tbody = document.getElementById('lecturesTableBody');
            tbody.innerHTML = '';
            
            const userLectures = lectures.filter(l => l.lecturerId === currentUser?.userId);
            
            if (userLectures.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-chalkboard-teacher"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Lectures Started Yet</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                Start your first lecture to begin tracking attendance.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="openNewLectureModal()">
                                <i class="fas fa-plus"></i> Start Your First Lecture
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Sort by date (newest first)
            userLectures.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
            
            userLectures.forEach(lecture => {
                const row = document.createElement('tr');
                const statusClass = `status-${lecture.status}`;
                const statusText = lecture.status.charAt(0).toUpperCase() + lecture.status.slice(1);
                
                row.innerHTML = `
                    <td><input type="checkbox" class="lecture-checkbox" value="${lecture.firebaseId || lecture.id}"></td>
                    <td><strong>${lecture.courseCode || lecture.code}</strong><br>${lecture.courseName || lecture.course}</td>
                    <td>${lecture.date}<br>${lecture.time}</td>
                    <td>${lecture.room}</td>
                    <td>${lecture.students} students</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        ${lecture.status === 'active' ? 
                            `<button class="dashboard-btn dashboard-btn-warning" onclick="showQRModal('${lecture.firebaseId || lecture.id}')">
                                <i class="fas fa-qrcode"></i> Show QR
                            </button>
                            <button class="dashboard-btn dashboard-btn-danger" onclick="endLecture('${lecture.firebaseId || lecture.id}')">
                                <i class="fas fa-stop"></i> End
                            </button>` :
                            `<button class="dashboard-btn dashboard-btn-info" onclick="viewLectureAttendance('${lecture.firebaseId || lecture.id}')">
                                <i class="fas fa-eye"></i> View
                            </button>`
                        }
                        <!-- MANUAL ENTRY BUTTON ADDED HERE -->
                        <button class="dashboard-btn dashboard-btn-primary" onclick="openManualEntryModal('${lecture.firebaseId || lecture.id}')">
                            <i class="fas fa-keyboard"></i> Manual Entry
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // ==================== LECTURE MANAGEMENT ====================
        function openNewLectureModal() {
            document.getElementById('newLectureModal').style.display = 'flex';
        }

        function closeNewLectureModal() {
            document.getElementById('newLectureModal').style.display = 'none';
        }

        async function createNewLecture() {
            const courseCode = document.getElementById('newLectureCourseCode').value.trim();
            const courseName = document.getElementById('newLectureCourseName').value.trim();
            const room = document.getElementById('newLectureRoom').value.trim();
            const students = parseInt(document.getElementById('newLectureStudents').value);
            
            if (!courseCode || !courseName || !room || !students) {
                alert('Please fill in all fields');
                return;
            }
            
            try {
                const firebaseId = 'lecture_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                const newLecture = {
                    firebaseId: firebaseId,
                    courseCode: courseCode,
                    courseName: courseName,
                    room: room,
                    students: students,
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    status: 'active',
                    lecturerId: currentUser?.userId,
                    lecturerName: currentUser?.name
                };
                
                // Save to Firebase
                const lectureRef = database.ref(`lectures/${firebaseId}`);
                await lectureRef.set(newLecture);
                
                // Save locally
                lectures.push(newLecture);
                localStorage.setItem('lectures', JSON.stringify(lectures));
                
                closeNewLectureModal();
                loadDashboard();
                
                showNotification('success', 'New Lecture Started', 
                    `${courseCode} - ${courseName} has been started successfully!`);
                
            } catch (error) {
                console.error('Error creating lecture:', error);
                alert('Error starting lecture: ' + error.message);
            }
        }

        function endLecture(lectureId) {
            const lecture = lectures.find(l => l.firebaseId === lectureId || l.id == lectureId);
            if (lecture) {
                lecture.status = 'completed';
                
                // Update in Firebase
                if (lecture.firebaseId) {
                    const lectureRef = database.ref(`lectures/${lecture.firebaseId}`);
                    lectureRef.update({ status: 'completed' });
                }
                
                localStorage.setItem('lectures', JSON.stringify(lectures));
                loadDashboard();
                
                showNotification('warning', 'Lecture Ended', 
                    `${lecture.courseCode} - ${lecture.courseName} has been completed.`);
            }
        }

        function deleteSelectLectures() {
            const selectedLectures = document.querySelectorAll('.lecture-checkbox:checked');
            if (selectedLectures.length === 0) {
                alert('Please select at least one lecture to delete.');
                return;
            }
            
            if (confirm(`Are you sure you want to delete ${selectedLectures.length} selected lecture(s)?`)) {
                selectedLectures.forEach(checkbox => {
                    const lectureId = checkbox.value;
                    const lectureIndex = lectures.findIndex(l => l.firebaseId === lectureId || l.id == lectureId);
                    
                    if (lectureIndex !== -1) {
                        // Remove from Firebase
                        const lecture = lectures[lectureIndex];
                        if (lecture.firebaseId) {
                            const lectureRef = database.ref(`lectures/${lecture.firebaseId}`);
                            lectureRef.remove();
                            
                            // Remove attendance records
                            const attendanceRef = database.ref(`attendance/${lecture.firebaseId}`);
                            attendanceRef.remove();
                        }
                        
                        // Remove locally
                        lectures.splice(lectureIndex, 1);
                    }
                });
                
                localStorage.setItem('lectures', JSON.stringify(lectures));
                loadDashboard();
                
                showNotification('success', 'Lectures Deleted', `${selectedLectures.length} lecture(s) have been removed.`);
            }
        }

        function toggleSelectAllLectures(checkbox) {
            const lectureCheckboxes = document.querySelectorAll('.lecture-checkbox');
            lectureCheckboxes.forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }

        // ==================== QR CODE SYSTEM ====================
        async function showQRModal(lectureId) {
            const lecture = lectures.find(l => l.firebaseId === lectureId || l.id == lectureId);
            if (!lecture) return;
            
            currentLectureId = lecture.firebaseId || lecture.id;
            
            // Update modal info
            document.getElementById('qrCourseCode').textContent = lecture.courseCode || lecture.code;
            document.getElementById('qrCourseName').textContent = lecture.courseName || lecture.course;
            document.getElementById('qrLectureRoom').textContent = lecture.room;
            document.getElementById('qrLectureStudents').textContent = lecture.students;
            document.getElementById('qrLectureId').textContent = currentLectureId;
            
            // Generate QR code
            await generateQRCode(lecture);
            
            // Show modal
            document.getElementById('qrModal').style.display = 'flex';
            
            // Start timer and monitoring
            startQRTimer(10);
            startRealTimeMonitoring(currentLectureId);
            updateScanStats(currentLectureId);
            
            showNotification('info', 'QR Code Generated', 
                `QR code for ${lecture.courseCode} is now active.`);
        }

        async function generateQRCode(lecture) {
            const qrData = {
                lectureId: lecture.firebaseId,
                courseCode: lecture.courseCode || lecture.code,
                courseName: lecture.courseName || lecture.course,
                room: lecture.room,
                timestamp: Date.now(),
                lecturerId: currentUser?.userId
            };
            
            const qrContainer = document.getElementById('qrCodeContainer');
            const qrDataString = JSON.stringify(qrData);
            
            qrContainer.innerHTML = '<div style="text-align: center; color: #000;"><i class="fas fa-spinner fa-spin"></i><br>Generating QR Code...</div>';
            
            try {
                // Try external QR code service
                const encodedData = encodeURIComponent(qrDataString);
                const qrImage = document.createElement('img');
                qrImage.className = 'qr-code-image';
                qrImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodedData}`;
                qrImage.alt = 'Scan this QR code for attendance';
                
                qrImage.onload = function() {
                    qrContainer.innerHTML = '';
                    qrContainer.appendChild(qrImage);
                };
                
                qrImage.onerror = function() {
                    // Fallback to local generation
                    generateLocalQRCode(qrDataString, qrContainer);
                };
                
                qrContainer.appendChild(qrImage);
                
            } catch (error) {
                generateLocalQRCode(qrDataString, qrContainer);
            }
        }

        function generateLocalQRCode(qrDataString, qrContainer) {
            try {
                qrContainer.innerHTML = '<div style="text-align: center; color: #000;"><i class="fas fa-spinner fa-spin"></i><br>Generating QR Code...</div>';
                
                const qrCanvas = document.createElement('canvas');
                
                QRCode.toCanvas(qrCanvas, qrDataString, {
                    width: 200,
                    height: 200,
                    margin: 1,
                    color: {
                        dark: '#000000',
                        light: '#FFFFFF'
                    }
                }, function(error) {
                    if (error) {
                        createTextFallback(qrDataString, qrContainer);
                    } else {
                        qrContainer.innerHTML = '';
                        qrContainer.appendChild(qrCanvas);
                    }
                });
                
            } catch (error) {
                createTextFallback(qrDataString, qrContainer);
            }
        }

        function createTextFallback(qrDataString, qrContainer) {
            qrContainer.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 48px; color: #000; margin-bottom: 10px;">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div style="font-size: 14px; color: #000; margin-bottom: 10px;">
                        <strong>QR Code Generation Failed</strong>
                    </div>
                    <div style="font-size: 10px; color: #000; word-break: break-all; background: #f5f5f5; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                        ${qrDataString}
                    </div>
                </div>
            `;
        }

        function startQRTimer(minutes) {
            let timeLeft = minutes * 60;
            if (qrTimerInterval) clearInterval(qrTimerInterval);
            
            updateQRTimerDisplay(timeLeft);
            
            qrTimerInterval = setInterval(() => {
                timeLeft--;
                updateQRTimerDisplay(timeLeft);
                
                if (timeLeft <= 0) {
                    clearInterval(qrTimerInterval);
                    autoCloseQRModal();
                }
            }, 1000);
        }

        function updateQRTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            const timerElement = document.getElementById('timerValue');
            
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            
            if (seconds < 60) {
                timerElement.style.color = '#ff5555';
                timerElement.classList.add('timer-danger');
            } else if (seconds < 180) {
                timerElement.style.color = '#ffff44';
                timerElement.classList.add('timer-warning');
            } else {
                timerElement.style.color = '#44ff44';
                timerElement.classList.remove('timer-warning', 'timer-danger');
            }
        }

        function closeQRModal() {
            document.getElementById('qrModal').style.display = 'none';
            if (qrTimerInterval) clearInterval(qrTimerInterval);
            if (realTimeListener) {
                realTimeListener();
                realTimeListener = null;
            }
            currentLectureId = null;
        }

        function autoCloseQRModal() {
            closeQRModal();
            alert('QR code has expired. Please generate a new one.');
        }

        function refreshQRCode() {
            if (currentLectureId) {
                const lecture = lectures.find(l => l.firebaseId === currentLectureId);
                if (lecture) {
                    generateQRCode(lecture);
                    startQRTimer(10);
                    alert('QR Code refreshed!');
                }
            }
        }

        // ==================== REAL-TIME ATTENDANCE MONITORING ====================
        async function startRealTimeMonitoring(lectureId) {
            if (realTimeListener) {
                realTimeListener();
            }
            
            const attendanceRef = database.ref(`attendance/${lectureId}`);
            
            realTimeListener = attendanceRef.on('value', (snapshot) => {
                const attendanceData = snapshot.val() || {};
                const records = processFirebaseAttendanceData(attendanceData);
                
                updateScanStatsImmediate(lectureId, records);
                updateLectureAttendanceImmediate(lectureId, records);
                showScanNotification(records.length);
            });
        }

        function processFirebaseAttendanceData(attendanceData) {
            const records = [];
            
            if (!attendanceData) return records;
            
            Object.keys(attendanceData).forEach(key => {
                const record = attendanceData[key];
                if (record && typeof record === 'object' && record.studentId) {
                    records.push({
                        id: key,
                        ...record
                    });
                }
            });
            
            return records;
        }

        function updateScanStatsImmediate(lectureId, records) {
            const scannedCount = records.length;
            const lecture = lectures.find(l => l.firebaseId === lectureId);
            const totalStudents = lecture ? lecture.students : 0;
            
            // Update QR modal stats
            const scannedElement = document.getElementById('scannedCount');
            const totalElement = document.getElementById('totalStudentsCount');
            const progressBar = document.getElementById('scanProgressBar');
            
            if (scannedElement) scannedElement.textContent = scannedCount;
            if (totalElement) totalElement.textContent = totalStudents;
            
            if (progressBar) {
                const progress = totalStudents > 0 ? (scannedCount / totalStudents) * 100 : 0;
                progressBar.style.width = progress + '%';
            }
        }

        function updateLectureAttendanceImmediate(lectureId, attendanceRecords) {
            const lectureIndex = lectures.findIndex(l => l.firebaseId === lectureId);
            
            if (lectureIndex !== -1) {
                if (!lectures[lectureIndex].attendance) {
                    lectures[lectureIndex].attendance = [];
                }
                
                const newAttendanceRecords = attendanceRecords.map(record => ({
                    studentId: record.studentId,
                    studentName: record.studentName,
                    timestamp: record.timestamp,
                    status: 'present'
                }));
                
                lectures[lectureIndex].attendance = [...newAttendanceRecords];
                localStorage.setItem('lectures', JSON.stringify(lectures));
            }
        }

        function showScanNotification(count) {
            let notification = document.getElementById('scanNotification');
            
            if (!notification) {
                notification = document.createElement('div');
                notification.id = 'scanNotification';
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #44ff44;
                    color: #000;
                    padding: 15px 20px;
                    border-radius: 10px;
                    font-weight: bold;
                    z-index: 10000;
                    box-shadow: 0 5px 15px rgba(68, 255, 68, 0.5);
                    animation: slideIn 0.3s ease;
                `;
                document.body.appendChild(notification);
            }
            
            notification.innerHTML = `
                <i class="fas fa-check-circle"></i> 
                Student scanned successfully!
                <br><small>Total: ${count} students</small>
            `;
            
            setTimeout(() => {
                if (notification) {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => {
                        if (notification && notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }
            }, 3000);
        }

        async function updateScanStats(lectureId) {
            try {
                const attendanceRef = database.ref(`attendance/${lectureId}`);
                const snapshot = await attendanceRef.once('value');
                const attendanceData = snapshot.val() || {};
                const attendanceRecords = processFirebaseAttendanceData(attendanceData);
                
                updateScanStatsImmediate(lectureId, attendanceRecords);
            } catch (error) {
                console.error('Error updating scan stats:', error);
            }
        }

        async function forceRefreshAttendance(lectureId) {
            try {
                const attendanceRef = database.ref(`attendance/${lectureId}`);
                const snapshot = await attendanceRef.once('value');
                const attendanceData = snapshot.val() || {};
                const records = processFirebaseAttendanceData(attendanceData);
                
                updateScanStatsImmediate(lectureId, records);
                updateLectureAttendanceImmediate(lectureId, records);
                showScanNotification(records.length);
                
            } catch (error) {
                console.error('Force refresh error:', error);
            }
        }

        // ==================== MANUAL ENTRY FOR USERS WITHOUT PHONES ====================
        function openManualEntryModal(lectureId) {
            currentLectureId = lectureId;
            const lecture = lectures.find(l => l.firebaseId === lectureId);
            
            if (lecture) {
                document.getElementById('manualCourseCode').value = lecture.courseCode || lecture.code;
                document.getElementById('manualCourseName').value = lecture.courseName || lecture.course;
            }
            
            document.getElementById('manualEntryModal').style.display = 'flex';
        }

        function closeManualEntryModal() {
            document.getElementById('manualEntryModal').style.display = 'none';
            document.getElementById('manualEntryForm').reset();
        }

        async function handleManualEntry() {
            const studentId = document.getElementById('manualStudentId').value.trim();
            const studentName = document.getElementById('manualStudentName').value.trim();
            const studentEmail = document.getElementById('manualStudentEmail').value.trim();
            const courseCode = document.getElementById('manualCourseCode').value.trim();
            const courseName = document.getElementById('manualCourseName').value.trim();
            
            if (!studentId || !studentName || !courseCode || !courseName) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (!currentLectureId) {
                alert('No active lecture found');
                return;
            }
            
            try {
                const recordId = 'manual_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                const attendanceRecord = {
                    studentId: studentId,
                    studentName: studentName,
                    studentEmail: studentEmail || '',
                    courseCode: courseCode,
                    courseName: courseName,
                    timestamp: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                    status: 'present',
                    entryType: 'manual',
                    lecturerId: currentUser?.userId
                };
                
                // Save to Firebase
                const attendanceRef = database.ref(`attendance/${currentLectureId}/${recordId}`);
                await attendanceRef.set(attendanceRecord);
                
                // Update local data
                const lectureIndex = lectures.findIndex(l => l.firebaseId === currentLectureId);
                if (lectureIndex !== -1) {
                    if (!lectures[lectureIndex].attendance) {
                        lectures[lectureIndex].attendance = [];
                    }
                    lectures[lectureIndex].attendance.push(attendanceRecord);
                    localStorage.setItem('lectures', JSON.stringify(lectures));
                }
                
                closeManualEntryModal();
                
                showNotification('success', 'Manual Entry Recorded', 
                    `${studentName} (${studentId}) has been marked present for ${courseCode}`);
                
                // Refresh attendance stats
                if (document.getElementById('attendanceManagement').classList.contains('active')) {
                    loadAttendanceManagement();
                }
                
                // Update QR modal if open
                updateScanStats(currentLectureId);
                
            } catch (error) {
                console.error('Error recording manual entry:', error);
                alert('Error recording attendance: ' + error.message);
            }
        }

        // ==================== ATTENDANCE MANAGEMENT ====================
        async function loadAttendanceManagement() {
            try {
                // Get attendance for current user's lectures
                const userLectures = lectures.filter(l => l.lecturerId === currentUser?.userId);
                const allAttendance = [];
                
                for (const lecture of userLectures) {
                    if (lecture.firebaseId) {
                        const attendanceRef = database.ref(`attendance/${lecture.firebaseId}`);
                        const snapshot = await attendanceRef.once('value');
                        const lectureAttendance = snapshot.val() || {};
                        const records = processFirebaseAttendanceData(lectureAttendance);
                        
                        records.forEach(record => {
                            record.lectureId = lecture.firebaseId;
                            record.courseCode = lecture.courseCode || lecture.code;
                            record.courseName = lecture.courseName || lecture.course;
                        });
                        
                        allAttendance.push(...records);
                    }
                }
                
                // Sort by timestamp (newest first)
                allAttendance.sort((a, b) => b.timestamp - a.timestamp);
                
                // Update UI
                updateAttendanceTable(allAttendance);
                updateAttendanceStats(allAttendance);
                
            } catch (error) {
                console.error('Error loading attendance:', error);
                updateAttendanceTable([]);
                updateAttendanceStats([]);
            }
        }

        function updateAttendanceTable(records) {
            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = '';
            
            if (records.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-users-slash"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Attendance Records</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                Start a lecture and have students scan QR codes or use manual entry to see records here.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="showApp('dashboard')">
                                <i class="fas fa-arrow-left"></i> Go to Dashboard
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }
            
            records.forEach(record => {
                const row = document.createElement('tr');
                const statusClass = record.status === 'present' ? 'status-completed' : 'status-scheduled';
                const statusText = record.status === 'present' ? 'PRESENT' : 'ABSENT';
                const entryType = record.entryType === 'manual' ? ' (Manual)' : '';
                
                row.innerHTML = `
                    <td>${record.studentId || 'N/A'}</td>
                    <td>${record.studentName || 'Unknown Student'}${entryType}</td>
                    <td>${record.courseName || 'Unknown Course'}</td>
                    <td>${record.courseCode || 'Unknown Code'}</td>
                    <td>${record.date || 'Unknown Date'}</td>
                    <td>${record.time || 'Unknown Time'}</td>
                    <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="dashboard-btn dashboard-btn-info" onclick="viewAttendanceDetails('${record.studentId}', '${record.date}')">View</button>
                        <button class="dashboard-btn dashboard-btn-danger" onclick="deleteAttendanceRecord('${record.id}', '${record.lectureId}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateAttendanceStats(records) {
            const totalRecords = records.length;
            document.getElementById('totalRecords').textContent = totalRecords;
            
            if (totalRecords === 0) {
                document.getElementById('presentToday').textContent = '0%';
                document.getElementById('presentWeek').textContent = '0%';
                document.getElementById('presentMonth').textContent = '0%';
                return;
            }
            
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = records.filter(r => r.date === today && r.status === 'present');
            const presentToday = totalRecords > 0 ? Math.round((todayRecords.length / totalRecords) * 100) : 0;
            document.getElementById('presentToday').textContent = presentToday + '%';
            
            // Simple calculations for demo
            const presentWeek = Math.max(0, (presentToday - 5));
            const presentMonth = Math.max(0, (presentToday - 10));
            document.getElementById('presentWeek').textContent = presentWeek + '%';
            document.getElementById('presentMonth').textContent = presentMonth + '%';
        }

        async function deleteAttendanceRecord(recordId, lectureId) {
            if (confirm('Are you sure you want to delete this attendance record?')) {
                try {
                    // Remove from Firebase
                    const recordRef = database.ref(`attendance/${lectureId}/${recordId}`);
                    await recordRef.remove();
                    
                    // Remove from local data
                    const lecture = lectures.find(l => l.firebaseId === lectureId);
                    if (lecture && lecture.attendance) {
                        lecture.attendance = lecture.attendance.filter(a => a.id !== recordId);
                        localStorage.setItem('lectures', JSON.stringify(lectures));
                    }
                    
                    showNotification('success', 'Record Deleted', 'Attendance record has been removed.');
                    loadAttendanceManagement();
                    
                } catch (error) {
                    console.error('Error deleting record:', error);
                    showNotification('danger', 'Deletion Failed', 'There was an error deleting the record.');
                }
            }
        }

        async function deleteAllAttendance() {
            const userLectures = lectures.filter(l => l.lecturerId === currentUser?.userId);
            
            if (userLectures.length === 0) {
                showNotification('warning', 'No Lectures', 'Please start a lecture first.');
                return;
            }
            
            if (confirm('Are you sure you want to delete ALL attendance records? This action cannot be undone.')) {
                try {
                    showLoading('Deleting attendance records...');
                    
                    // Delete attendance from Firebase for all user's lectures
                    for (const lecture of userLectures) {
                        if (lecture.firebaseId) {
                            const attendanceRef = database.ref(`attendance/${lecture.firebaseId}`);
                            await attendanceRef.remove();
                            
                            // Clear local attendance
                            if (lecture.attendance) {
                                lecture.attendance = [];
                            }
                        }
                    }
                    
                    localStorage.setItem('lectures', JSON.stringify(lectures));
                    hideLoading();
                    
                    showNotification('success', 'Records Deleted', 'All attendance records have been deleted.');
                    loadAttendanceManagement();
                    
                } catch (error) {
                    hideLoading();
                    console.error('Error deleting all attendance:', error);
                    showNotification('danger', 'Deletion Failed', 'There was an error deleting records.');
                }
            }
        }

        function applyFilters() {
            alert('Filters applied!');
            loadAttendanceManagement();
        }

        function exportAttendance(format) {
            alert(`Exporting as ${format.toUpperCase()}... (Demo)`);
        }

        // ==================== SCHEDULE MANAGEMENT ====================
        function loadScheduleManagement() {
            generateCalendar();
            updateScheduleTable();
        }

        function generateCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            // Update month display
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            document.getElementById('currentMonth').textContent = `${months[currentMonth]} ${currentYear}`;
            
            // Add day headers
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.textContent = day;
                dayHeader.style.fontWeight = 'bold';
                dayHeader.style.color = '#44ff44';
                calendarGrid.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }
            
            // Add calendar days
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                // Mark today
                const today = new Date();
                if (i === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear()) {
                    day.classList.add('today');
                }
                
                // Mark days with lectures
                const dayOfWeek = days[new Date(currentYear, currentMonth, i).getDay()];
                const hasLecture = schedules.some(schedule => {
                    const scheduleDay = schedule.day.substring(0, 3);
                    return dayOfWeek.toLowerCase().includes(scheduleDay.toLowerCase());
                });
                
                if (hasLecture) {
                    day.classList.add('has-lecture');
                }
                
                calendarGrid.appendChild(day);
            }
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar();
        }

        function updateScheduleTable() {
            const tbody = document.getElementById('scheduleTableBody');
            tbody.innerHTML = '';
            
            if (schedules.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; color: #ccc; padding: 40px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">
                                <i class="fas fa-calendar-plus"></i>
                            </div>
                            <h3 style="color: #ccc; margin-bottom: 10px;">No Schedules Created</h3>
                            <p style="color: #888; margin-bottom: 20px;">
                                Create lecture schedules to help organize your teaching timetable.
                            </p>
                            <button class="dashboard-btn dashboard-btn-primary" onclick="openScheduleModal()">
                                <i class="fas fa-plus"></i> Create Your First Schedule
                            </button>
                        </td>
                    </tr>
                `;
                return;
            }
            
            schedules.forEach(schedule => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td><input type="checkbox" class="schedule-checkbox" value="${schedule.id}"></td>
                    <td>${schedule.courseName}</td>
                    <td>${schedule.course}</td>
                    <td>${schedule.day}</td>
                    <td>${schedule.time}</td>
                    <td>${schedule.room}</td>
                    <td>${schedule.recurring}</td>
                    <td>
                        <button class="dashboard-btn dashboard-btn-primary" onclick="editSchedule(${schedule.id})">Edit</button>
                        <button class="dashboard-btn dashboard-btn-danger" onclick="deleteSchedule(${schedule.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function openScheduleModal() {
            document.getElementById('newScheduleModal').style.display = 'flex';
        }

        function closeNewScheduleModal() {
            document.getElementById('newScheduleModal').style.display = 'none';
        }

        function createNewSchedule() {
            const courseCode = document.getElementById('newScheduleCourseCode').value.trim();
            const courseName = document.getElementById('newScheduleCourseName').value.trim();
            const day = document.getElementById('newScheduleDay').value;
            const startTime = document.getElementById('newScheduleStartTime').value;
            const endTime = document.getElementById('newScheduleEndTime').value;
            const room = document.getElementById('newScheduleRoom').value.trim();
            const recurring = document.getElementById('newScheduleRecurring').value;
            
            if (!courseCode || !courseName || !day || !startTime || !endTime || !room || !recurring) {
                alert('Please fill in all fields');
                return;
            }
            
            // Create new schedule
            const newSchedule = {
                id: schedules.length > 0 ? Math.max(...schedules.map(s => s.id)) + 1 : 1,
                course: courseCode,
                courseName: courseName,
                day: day,
                time: `${startTime}-${endTime}`,
                room: room,
                recurring: recurring
            };
            
            schedules.push(newSchedule);
            localStorage.setItem('schedules', JSON.stringify(schedules));
            closeNewScheduleModal();
            updateScheduleTable();
            
            alert('New schedule added successfully!');
        }

        function toggleSelectAllSchedules(checkbox) {
            const scheduleCheckboxes = document.querySelectorAll('.schedule-checkbox');
            scheduleCheckboxes.forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }

        function editSchedule(scheduleId) {
            const schedule = schedules.find(s => s.id === scheduleId);
            alert('Editing schedule for ' + schedule.course);
        }

        function deleteSchedule(scheduleId) {
            if (confirm('Are you sure you want to delete this schedule?')) {
                schedules = schedules.filter(s => s.id !== scheduleId);
                localStorage.setItem('schedules', JSON.stringify(schedules));
                updateScheduleTable();
                alert('Schedule deleted successfully!');
            }
        }

        // ==================== SETTINGS FUNCTIONS ====================
        function toggleDarkMode(enabled) {
            if (enabled) {
                document.body.classList.remove('light-mode');
            } else {
                document.body.classList.add('light-mode');
            }
        }

        function changeLanguage(language) {
            alert(`Language changed to ${language}`);
        }

        function toggleAutoScan(enabled) {
            alert(`Auto scan ${enabled ? 'enabled' : 'disabled'}`);
        }

        function updateScanInterval(seconds) {
            alert(`Scan interval set to ${seconds} seconds`);
        }

        function updateMaxStudents(count) {
            alert(`Max students per scan set to ${count}`);
        }

        // ==================== UTILITY FUNCTIONS ====================
        function showLoading(message = 'Processing...') {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingMessage = document.getElementById('loadingMessage');
            loadingMessage.textContent = message;
            loadingOverlay.style.display = 'flex';
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'none';
        }

        function showResult(type, title, message) {
            const modal = document.getElementById('resultModal');
            const content = document.getElementById('resultContent');
            const icon = document.getElementById('resultIcon');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            
            content.className = `result-content ${type === 'success' ? 'result-success' : 'result-error'}`;
            
            if (type === 'success') {
                icon.innerHTML = '<i class="fas fa-check-circle"></i>';
                icon.style.color = '#44ff44';
            } else {
                icon.innerHTML = '<i class="fas fa-exclamation-circle"></i>';
                icon.style.color = '#ff4444';
            }
            
            resultTitle.textContent = title;
            resultMessage.innerHTML = message;
            modal.style.display = 'flex';
        }

        function closeResult() {
            document.getElementById('resultModal').style.display = 'none';
        }

        function showNotification(type, title, message) {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => {
                notification.remove();
            });
            
            // Create new notification
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'warning') icon = 'fa-exclamation-triangle';
            if (type === 'danger') icon = 'fa-times-circle';
            
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${icon}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after animation
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3500);
        }

        function setupRealTimeValidation() {
            // Login form validation
            document.getElementById('loginId').addEventListener('input', function() {
                validateField(this, 'loginIdError', this.value.trim() !== '');
            });
            
            document.getElementById('loginPassword').addEventListener('input', function() {
                validateField(this, 'loginPasswordError', this.value.trim() !== '');
            });
            
            // Signup form validation
            document.getElementById('fullName').addEventListener('input', function() {
                validateField(this, 'fullNameError', this.value.trim() !== '');
            });
            
            document.getElementById('email').addEventListener('input', function() {
                const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value);
                validateField(this, 'emailError', isValid);
            });
            
            document.getElementById('userId').addEventListener('input', function() {
                validateField(this, 'userIdError', this.value.trim() !== '');
            });
            
            document.getElementById('institution').addEventListener('input', function() {
                validateField(this, 'institutionError', this.value.trim() !== '');
            });
            
            document.getElementById('department').addEventListener('input', function() {
                validateField(this, 'departmentError', this.value.trim() !== '');
            });
            
            // Password strength validation
            document.getElementById('signupPassword').addEventListener('input', function() {
                const password = this.value;
                const isValid = updatePasswordStrength(password);
                validateField(this, 'signupPasswordError', isValid);
            });
            
            document.getElementById('confirmPassword').addEventListener('input', function() {
                const password = document.getElementById('signupPassword').value;
                validateField(this, 'confirmPasswordError', this.value === password);
            });
            
            // Forgot password form validation
            document.getElementById('forgotEmail').addEventListener('input', function() {
                const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value);
                validateField(this, 'forgotEmailError', isValid);
            });
        }

        function validateField(field, errorId, isValid) {
            const errorElement = document.getElementById(errorId);
            
            if (isValid) {
                field.parentElement.classList.remove('error');
                errorElement.style.display = 'none';
            } else {
                field.parentElement.classList.add('error');
                errorElement.style.display = 'block';
            }
            
            return isValid;
        }

        function validateSignupForm() {
            const name = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const userId = document.getElementById('userId').value;
            const institution = document.getElementById('institution').value;
            const department = document.getElementById('department').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            const isNameValid = validateField(document.getElementById('fullName'), 'fullNameError', name.trim() !== '');
            const isEmailValid = validateField(document.getElementById('email'), 'emailError', /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email));
            const isUserIdValid = validateField(document.getElementById('userId'), 'userIdError', userId.trim() !== '');
            const isInstitutionValid = validateField(document.getElementById('institution'), 'institutionError', institution.trim() !== '');
            const isDepartmentValid = validateField(document.getElementById('department'), 'departmentError', department.trim() !== '');
            
            const isPasswordValid = updatePasswordStrength(password);
            validateField(document.getElementById('signupPassword'), 'signupPasswordError', isPasswordValid);
            
            const isConfirmPasswordValid = validateField(document.getElementById('confirmPassword'), 'confirmPasswordError', password === confirmPassword);
            
            if (!isNameValid || !isEmailValid || !isUserIdValid || !isInstitutionValid || 
                !isDepartmentValid || !isPasswordValid || !isConfirmPasswordValid || !agreeTerms) {
                return false;
            }
            
            return true;
        }

        function updatePasswordStrength(password) {
            const requirements = {
                length: password.length >= 8,
                uppercase: /[A-Z]/.test(password),
                lowercase: /[a-z]/.test(password),
                number: /[0-9]/.test(password),
                symbol: /[^A-Za-z0-9]/.test(password)
            };
            
            const validRequirements = Object.values(requirements).filter(Boolean).length;
            const totalRequirements = Object.keys(requirements).length;
            const strengthPercentage = (validRequirements / totalRequirements) * 100;
            
            let strengthLevel = 'weak';
            let strengthLabel = 'Weak';
            
            if (strengthPercentage >= 80) {
                strengthLevel = 'strong';
                strengthLabel = 'Strong';
            } else if (strengthPercentage >= 60) {
                strengthLevel = 'good';
                strengthLabel = 'Good';
            } else if (strengthPercentage >= 40) {
                strengthLevel = 'fair';
                strengthLabel = 'Fair';
            }
            
            // Update UI
            const fillElement = document.getElementById('strengthFill');
            const valueElement = document.getElementById('strengthValue');
            
            fillElement.className = 'strength-fill ' + strengthLevel;
            valueElement.textContent = strengthLabel;
            valueElement.style.color = getStrengthColor(strengthLevel);
            
            // Update requirement indicators
            updateRequirementIndicators(requirements);
            
            return strengthPercentage === 100;
        }

        function getStrengthColor(level) {
            switch(level) {
                case 'weak': return '#ff4444';
                case 'fair': return '#ffaa00';
                case 'good': return '#44aaff';
                case 'strong': return '#44ff44';
                default: return '#888';
            }
        }

        function updateRequirementIndicators(requirements) {
            const requirementIds = {
                length: 'reqLength',
                uppercase: 'reqUppercase',
                lowercase: 'reqLowercase',
                number: 'reqNumber',
                symbol: 'reqSymbol'
            };
            
            Object.keys(requirements).forEach(req => {
                const element = document.getElementById(requirementIds[req]);
                if (requirements[req]) {
                    element.classList.remove('invalid');
                    element.classList.add('valid');
                } else {
                    element.classList.remove('valid');
                    element.classList.add('invalid');
                }
            });
        }

        function createMockFirebase() {
            console.log("Using mock Firebase");
            return {
                ref: function(path) {
                    return {
                        set: function(data) {
                            console.log("Mock Firebase: Setting data at", path, data);
                            return Promise.resolve();
                        },
                        update: function(data) {
                            console.log("Mock Firebase: Updating data at", path, data);
                            return Promise.resolve();
                        },
                        once: function() {
                            console.log("Mock Firebase: Reading data from", path);
                            return Promise.resolve({ val: () => ({}) });
                        },
                        on: function(event, callback) {
                            console.log("Mock Firebase: Listening to", path, event);
                            return function() { console.log("Mock Firebase: Listener removed"); };
                        },
                        remove: function() {
                            console.log("Mock Firebase: Removing data at", path);
                            return Promise.resolve();
                        }
                    };
                }
            };
        }

        // ==================== PWA FUNCTIONS ====================
        function initPWA() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/sw.js')
                        .then(function(registration) {
                            console.log('ServiceWorker registered');
                        })
                        .catch(function(error) {
                            console.log('ServiceWorker registration failed:', error);
                        });
                });
            }
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
                if (qrTimerInterval) {
                    clearInterval(qrTimerInterval);
                }
                if (realTimeListener) {
                    realTimeListener();
                    realTimeListener = null;
                }
                currentLectureId = null;
            }
        });

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
